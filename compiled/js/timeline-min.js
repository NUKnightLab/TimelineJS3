!function(t){t.VCO={VERSION:"0.1",_originalL:t.VCO}}(this),VCO.debug=!0,VCO.Bind=function(t,e){return function(){return t.apply(e,arguments)}},trace=function(t){VCO.debug&&(window.console?console.log(t):"undefined"!=typeof jsTrace&&jsTrace.send(t))},VCO.Util={extend:function(t){for(var e=Array.prototype.slice.call(arguments,1),i=0,n=e.length,s;n>i;i++){s=e[i]||{};for(var a in s)s.hasOwnProperty(a)&&(t[a]=s[a])}return t},setOptions:function(t,e){t.options=VCO.Util.extend({},t.options,e),""===t.options.uniqueid&&(t.options.uniqueid=VCO.Util.unique_ID(6))},convertUnixTime:function(t){var e,i,n,s,a,o,r=[],l={ymd:"",time:"",time_array:[],date_array:[],full_array:[]};l.ymd=t.split(" ")[0],l.time=t.split(" ")[1],l.date_array=l.ymd.split("-"),l.time_array=l.time.split(":"),l.full_array=l.date_array.concat(l.time_array);for(var h=0;h<l.full_array.length;h++)r.push(parseInt(l.full_array[h]));return e=new Date(r[0],r[1],r[2],r[3],r[4],r[5]),i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=e.getFullYear(),s=i[e.getMonth()],a=e.getDate(),o=s+", "+a+" "+n},setData:function(t,e){t.data=VCO.Util.extend({},t.data,e),""===t.data.uniqueid&&(t.data.uniqueid=VCO.Util.unique_ID(6))},mergeData:function(t,e){var i;for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},stamp:function(){var t=0,e="_vco_id";return function(i){return i[e]=i[e]||++t,i[e]}}(),isArray:function(){if(Array.isArray)return Array.isArray;var t=Object.prototype.toString,e=t.call([]);return function(i){return t.call(i)===e}}(),unique_ID:function(t,e){var i=function(t){return Math.floor(Math.random()*t)},n=function(){var t="abcdefghijklmnopqurstuvwxyz";return t.substr(i(32),1)},s=function(t){for(var e="",i=0;t>i;i++)e+=n();return e};return e?e+"-"+s(t):"vco-"+s(t)},htmlify:function(t){return t.match(/<p>[\s\S]*?<\/p>/)?t:"<p>"+t+"</p>"},getParamString:function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i+"="+t[i]);return"?"+e.join("&")},formatNum:function(t,e){var i=Math.pow(10,e||5);return Math.round(t*i)/i},falseFn:function(){return!1},requestAnimFrame:function(){function t(t){window.setTimeout(t,1e3/60)}var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||t;return function(i,n,s,a){i=n?VCO.Util.bind(i,n):i,s&&e===t?i():e(i,a)}}(),bind:function(t,e){return function(){return t.apply(e,arguments)}},template:function(t,e){return t.replace(/\{ *([\w_]+) *\}/g,function(t,i){var n=e[i];if(!e.hasOwnProperty(i))throw new Error("No value provided for variable "+t);return n})},hexToRgb:function(t){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,function(t,e,i,n){return e+e+i+i+n+n});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null},ratio:{square:function(t){var e={w:0,h:0};return t.w>t.h&&t.h>0?(e.h=t.h,e.w=t.h):(e.w=t.w,e.h=t.w),e},r16_9:function(t){return null!==t.w&&""!==t.w?Math.round(t.w/16*9):null!==t.h&&""!==t.h?Math.round(t.h/9*16):0},r4_3:function(t){return null!==t.w&&""!==t.w?Math.round(t.w/4*3):null!==t.h&&""!==t.h?Math.round(t.h/3*4):void 0}},getObjectAttributeByIndex:function(t,e){if("undefined"!=typeof t){var i=0;for(var n in t){if(e===i)return t[n];i++}return""}return""},getUrlVars:function(t){var e,i=[],n,s;e=t.toString(),e.match("&#038;")?e=e.replace("&#038;","&"):e.match("&#38;")?e=e.replace("&#38;","&"):e.match("&amp;")&&(e=e.replace("&amp;","&")),s=e.slice(e.indexOf("?")+1).split("&");for(var a=0;a<s.length;a++)n=s[a].split("="),i.push(n[0]),i[n[0]]=n[1];return i}},function(t){var e=function(){function t(t){return null==t?String(t):W[Y.call(t)]||"object"}function e(e){return"function"==t(e)}function i(t){return null!=t&&t==t.window}function n(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function s(e){return"object"==t(e)}function a(t){return s(t)&&!i(t)&&Object.getPrototypeOf(t)==Object.prototype}function o(t){return"number"==typeof t.length}function r(t){return M.call(t,function(t){return null!=t})}function l(t){return t.length>0?$.fn.concat.apply([],t):t}function h(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function c(t){return t in E?E[t]:E[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function d(t,e){return"number"!=typeof e||T[h(t)]?e:e+"px"}function u(t){var e,i;return k[t]||(e=D.createElement(t),D.body.appendChild(e),i=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==i&&(i="block"),k[t]=i),k[t]}function p(t){return"children"in t?V.call(t.children):$.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function m(t,e,i){for(b in e)i&&(a(e[b])||K(e[b]))?(a(e[b])&&!a(t[b])&&(t[b]={}),K(e[b])&&!K(t[b])&&(t[b]=[]),m(t[b],e[b],i)):e[b]!==w&&(t[b]=e[b])}function f(t,e){return null==e?$(t):$(t).filter(e)}function _(t,i,n,s){return e(i)?i.call(t,n,s):i}function g(t,e,i){null==i?t.removeAttribute(e):t.setAttribute(e,i)}function v(t,e){var i=t.className,n=i&&i.baseVal!==w;return e===w?n?i.baseVal:i:void(n?i.baseVal=e:t.className=e)}function y(t){var e;try{return t?"true"==t||("false"==t?!1:"null"==t?null:/^0/.test(t)||isNaN(e=Number(t))?/^[\[\{]/.test(t)?$.parseJSON(t):t:e):t}catch(i){return t}}function C(t,e){e(t);for(var i in t.childNodes)C(t.childNodes[i],e)}var w,b,$,O,x=[],V=x.slice,M=x.filter,D=window.document,k={},E={},T={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},L=/^\s*<(\w+|!)[^>]*>/,S=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,A=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,N=/^(?:body|html)$/i,P=/([A-Z])/g,j=["val","css","html","text","data","width","height","offset"],I=["after","prepend","before","append"],B=D.createElement("table"),z=D.createElement("tr"),U={tr:D.createElement("tbody"),tbody:B,thead:B,tfoot:B,td:z,th:z,"*":D.createElement("div")},F=/complete|loaded|interactive/,q=/^\.([\w-]+)$/,H=/^#([\w-]*)$/,R=/^[\w-]*$/,W={},Y=W.toString,J={},X,Z,G=D.createElement("div"),Q={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},K=Array.isArray||function(t){return t instanceof Array};return J.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var i=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(i)return i.call(t,e);var n,s=t.parentNode,a=!s;return a&&(s=G).appendChild(t),n=~J.qsa(s,e).indexOf(t),a&&G.removeChild(t),n},X=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},Z=function(t){return M.call(t,function(e,i){return t.indexOf(e)==i})},J.fragment=function(t,e,i){var n,s,o;return S.test(t)&&(n=$(D.createElement(RegExp.$1))),n||(t.replace&&(t=t.replace(A,"<$1></$2>")),e===w&&(e=L.test(t)&&RegExp.$1),e in U||(e="*"),o=U[e],o.innerHTML=""+t,n=$.each(V.call(o.childNodes),function(){o.removeChild(this)})),a(i)&&(s=$(n),$.each(i,function(t,e){j.indexOf(t)>-1?s[t](e):s.attr(t,e)})),n},J.Z=function(t,e){return t=t||[],t.__proto__=$.fn,t.selector=e||"",t},J.isZ=function(t){return t instanceof J.Z},J.init=function(t,i){var n;if(!t)return J.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&L.test(t))n=J.fragment(t,RegExp.$1,i),t=null;else{if(i!==w)return $(i).find(t);n=J.qsa(D,t)}else{if(e(t))return $(D).ready(t);if(J.isZ(t))return t;if(K(t))n=r(t);else if(s(t))n=[t],t=null;else if(L.test(t))n=J.fragment(t.trim(),RegExp.$1,i),t=null;else{if(i!==w)return $(i).find(t);n=J.qsa(D,t)}}return J.Z(n,t)},$=function(t,e){return J.init(t,e)},$.extend=function(t){var e,i=V.call(arguments,1);return"boolean"==typeof t&&(e=t,t=i.shift()),i.forEach(function(i){m(t,i,e)}),t},J.qsa=function(t,e){var i,s="#"==e[0],a=!s&&"."==e[0],o=s||a?e.slice(1):e,r=R.test(o);return n(t)&&r&&s?(i=t.getElementById(o))?[i]:[]:1!==t.nodeType&&9!==t.nodeType?[]:V.call(r&&!s?a?t.getElementsByClassName(o):t.getElementsByTagName(e):t.querySelectorAll(e))},$.contains=function(t,e){return t!==e&&t.contains(e)},$.type=t,$.isFunction=e,$.isWindow=i,$.isArray=K,$.isPlainObject=a,$.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},$.inArray=function(t,e,i){return x.indexOf.call(e,t,i)},$.camelCase=X,$.trim=function(t){return null==t?"":String.prototype.trim.call(t)},$.uuid=0,$.support={},$.expr={},$.map=function(t,e){var i,n=[],s,a;if(o(t))for(s=0;s<t.length;s++)i=e(t[s],s),null!=i&&n.push(i);else for(a in t)i=e(t[a],a),null!=i&&n.push(i);return l(n)},$.each=function(t,e){var i,n;if(o(t)){for(i=0;i<t.length;i++)if(e.call(t[i],i,t[i])===!1)return t}else for(n in t)if(e.call(t[n],n,t[n])===!1)return t;return t},$.grep=function(t,e){return M.call(t,e)},window.JSON&&($.parseJSON=JSON.parse),$.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){W["[object "+e+"]"]=e.toLowerCase()}),$.fn={forEach:x.forEach,reduce:x.reduce,push:x.push,sort:x.sort,indexOf:x.indexOf,concat:x.concat,map:function(t){return $($.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return $(V.apply(this,arguments))},ready:function(t){return F.test(D.readyState)&&D.body?t($):D.addEventListener("DOMContentLoaded",function(){t($)},!1),this},get:function(t){return t===w?V.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return x.every.call(this,function(e,i){return t.call(e,i,e)!==!1}),this},filter:function(t){return e(t)?this.not(this.not(t)):$(M.call(this,function(e){return J.matches(e,t)}))},add:function(t,e){return $(Z(this.concat($(t,e))))},is:function(t){return this.length>0&&J.matches(this[0],t)},not:function(t){var i=[];if(e(t)&&t.call!==w)this.each(function(e){t.call(this,e)||i.push(this)});else{var n="string"==typeof t?this.filter(t):o(t)&&e(t.item)?V.call(t):$(t);this.forEach(function(t){n.indexOf(t)<0&&i.push(t)})}return $(i)},has:function(t){return this.filter(function(){return s(t)?$.contains(this,t):$(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!s(t)?t:$(t)},last:function(){var t=this[this.length-1];return t&&!s(t)?t:$(t)},find:function(t){var e,i=this;return e="object"==typeof t?$(t).filter(function(){var t=this;return x.some.call(i,function(e){return $.contains(e,t)})}):1==this.length?$(J.qsa(this[0],t)):this.map(function(){return J.qsa(this,t)})},closest:function(t,e){var i=this[0],s=!1;for("object"==typeof t&&(s=$(t));i&&!(s?s.indexOf(i)>=0:J.matches(i,t));)i=i!==e&&!n(i)&&i.parentNode;return $(i)},parents:function(t){for(var e=[],i=this;i.length>0;)i=$.map(i,function(t){return(t=t.parentNode)&&!n(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return f(e,t)},parent:function(t){return f(Z(this.pluck("parentNode")),t)},children:function(t){return f(this.map(function(){return p(this)}),t)},contents:function(){return this.map(function(){return V.call(this.childNodes)})},siblings:function(t){return f(this.map(function(t,e){return M.call(p(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return $.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=u(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var i=e(t);if(this[0]&&!i)var n=$(t).get(0),s=n.parentNode||this.length>1;return this.each(function(e){$(this).wrapAll(i?t.call(this,e):s?n.cloneNode(!0):n)})},wrapAll:function(t){if(this[0]){$(this[0]).before(t=$(t));for(var e;(e=t.children()).length;)t=e.first();$(t).append(this)}return this},wrapInner:function(t){var i=e(t);return this.each(function(e){var n=$(this),s=n.contents(),a=i?t.call(this,e):t;s.length?s.wrapAll(a):n.append(a)})},unwrap:function(){return this.parent().each(function(){$(this).replaceWith($(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=$(this);(t===w?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return $(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return $(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0===arguments.length?this.length>0?this[0].innerHTML:null:this.each(function(e){var i=this.innerHTML;$(this).empty().append(_(this,t,e,i))})},text:function(t){return 0===arguments.length?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=t===w?"":""+t})},attr:function(t,e){var i;return"string"==typeof t&&e===w?0==this.length||1!==this[0].nodeType?w:"value"==t&&"INPUT"==this[0].nodeName?this.val():!(i=this[0].getAttribute(t))&&t in this[0]?this[0][t]:i:this.each(function(i){if(1===this.nodeType)if(s(t))for(b in t)g(this,b,t[b]);else g(this,t,_(this,e,i,this.getAttribute(t)))})},removeAttr:function(t){return this.each(function(){1===this.nodeType&&g(this,t)})},prop:function(t,e){return t=Q[t]||t,e===w?this[0]&&this[0][t]:this.each(function(i){this[t]=_(this,e,i,this[t])})},data:function(t,e){var i=this.attr("data-"+t.replace(P,"-$1").toLowerCase(),e);return null!==i?y(i):w},val:function(t){return 0===arguments.length?this[0]&&(this[0].multiple?$(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(e){this.value=_(this,t,e,this.value)})},offset:function(t){if(t)return this.each(function(e){var i=$(this),n=_(this,t,e,i.offset()),s=i.offsetParent().offset(),a={top:n.top-s.top,left:n.left-s.left};"static"==i.css("position")&&(a.position="relative"),i.css(a)});if(0==this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,i){if(arguments.length<2){var n=this[0],s=getComputedStyle(n,"");if(!n)return;if("string"==typeof e)return n.style[X(e)]||s.getPropertyValue(e);if(K(e)){var a={};return $.each(K(e)?e:[e],function(t,e){a[e]=n.style[X(e)]||s.getPropertyValue(e)}),a}}var o="";if("string"==t(e))i||0===i?o=h(e)+":"+d(e,i):this.each(function(){this.style.removeProperty(h(e))});else for(b in e)e[b]||0===e[b]?o+=h(b)+":"+d(b,e[b])+";":this.each(function(){this.style.removeProperty(h(b))});return this.each(function(){this.style.cssText+=";"+o})},index:function(t){return t?this.indexOf($(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return t?x.some.call(this,function(t){return this.test(v(t))},c(t)):!1},addClass:function(t){return t?this.each(function(e){O=[];var i=v(this),n=_(this,t,e,i);n.split(/\s+/g).forEach(function(t){$(this).hasClass(t)||O.push(t)},this),O.length&&v(this,i+(i?" ":"")+O.join(" "))}):this},removeClass:function(t){return this.each(function(e){return t===w?v(this,""):(O=v(this),_(this,t,e,O).split(/\s+/g).forEach(function(t){O=O.replace(c(t)," ")}),void v(this,O.trim()))})},toggleClass:function(t,e){return t?this.each(function(i){var n=$(this),s=_(this,t,i,v(this));s.split(/\s+/g).forEach(function(t){(e===w?!n.hasClass(t):e)?n.addClass(t):n.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===w?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===w?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),i=this.offset(),n=N.test(e[0].nodeName)?{top:0,left:0}:e.offset();return i.top-=parseFloat($(t).css("margin-top"))||0,i.left-=parseFloat($(t).css("margin-left"))||0,n.top+=parseFloat($(e[0]).css("border-top-width"))||0,n.left+=parseFloat($(e[0]).css("border-left-width"))||0,{top:i.top-n.top,left:i.left-n.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||D.body;t&&!N.test(t.nodeName)&&"static"==$(t).css("position");)t=t.offsetParent;return t})}},$.fn.detach=$.fn.remove,["width","height"].forEach(function(t){var e=t.replace(/./,function(t){return t[0].toUpperCase()});$.fn[t]=function(s){var a,o=this[0];return s===w?i(o)?o["inner"+e]:n(o)?o.documentElement["scroll"+e]:(a=this.offset())&&a[t]:this.each(function(e){o=$(this),o.css(t,_(this,s,e,o[t]()))})}}),I.forEach(function(e,i){var n=i%2;$.fn[e]=function(){var e,s=$.map(arguments,function(i){return e=t(i),"object"==e||"array"==e||null==i?i:J.fragment(i)}),a,o=this.length>1;return s.length<1?this:this.each(function(t,e){a=n?e:e.parentNode,e=0==i?e.nextSibling:1==i?e.firstChild:2==i?e:null,s.forEach(function(t){if(o)t=t.cloneNode(!0);else if(!a)return $(t).remove();C(a.insertBefore(t,e),function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},$.fn[n?e+"To":"insert"+(i?"Before":"After")]=function(t){return $(t)[e](this),this}}),J.Z.prototype=$.fn,J.uniq=Z,J.deserializeValue=y,$.zepto=J,$}();window.Zepto=e,void 0===window.$&&(window.$=e),function($){function t(t){return t._zid||(t._zid=d++)}function e(e,s,a,o){if(s=i(s),s.ns)var r=n(s.ns);return(_[t(e)]||[]).filter(function(e){return!(!e||s.e&&e.e!=s.e||s.ns&&!r.test(e.ns)||a&&t(e.fn)!==t(a)||o&&e.sel!=o)})}function i(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function n(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function s(t,e){return t.del&&!v&&t.e in y||!!e}function a(t){return C[t]||v&&y[t]||t}function o(e,n,o,r,h,c,d){var p=t(e),m=_[p]||(_[p]=[]);n.split(/\s/).forEach(function(t){if("ready"==t)return $(document).ready(o);var n=i(t);n.fn=o,n.sel=h,n.e in C&&(o=function(t){var e=t.relatedTarget;return!e||e!==this&&!$.contains(this,e)?n.fn.apply(this,arguments):void 0}),n.del=c;var p=c||o;n.proxy=function(t){if(t=l(t),!t.isImmediatePropagationStopped()){t.data=r;var i=p.apply(e,t._args==u?[t]:[t].concat(t._args));return i===!1&&(t.preventDefault(),t.stopPropagation()),i}},n.i=m.length,m.push(n),"addEventListener"in e&&e.addEventListener(a(n.e),n.proxy,s(n,d))})}function r(i,n,o,r,l){var h=t(i);(n||"").split(/\s/).forEach(function(t){e(i,t,o,r).forEach(function(t){delete _[h][t.i],"removeEventListener"in i&&i.removeEventListener(a(t.e),t.proxy,s(t,l))})})}function l(t,e){return(e||!t.isDefaultPrevented)&&(e||(e=t),$.each(x,function(i,n){var s=e[i];t[i]=function(){return this[n]=w,s&&s.apply(e,arguments)},t[n]=b}),(e.defaultPrevented!==u?e.defaultPrevented:"returnValue"in e?e.returnValue===!1:e.getPreventDefault&&e.getPreventDefault())&&(t.isDefaultPrevented=w)),t}function h(t){var e,i={originalEvent:t};for(e in t)O.test(e)||t[e]===u||(i[e]=t[e]);return l(i,t)}var c=$.zepto.qsa,d=1,u,p=Array.prototype.slice,m=$.isFunction,f=function(t){return"string"==typeof t},_={},g={},v="onfocusin"in window,y={focus:"focusin",blur:"focusout"},C={mouseenter:"mouseover",mouseleave:"mouseout"};g.click=g.mousedown=g.mouseup=g.mousemove="MouseEvents",$.event={add:o,remove:r},$.proxy=function(e,i){if(m(e)){var n=function(){return e.apply(i,arguments)};return n._zid=t(e),n}if(f(i))return $.proxy(e[i],e);throw new TypeError("expected function")},$.fn.bind=function(t,e,i){return this.on(t,e,i)},$.fn.unbind=function(t,e){return this.off(t,e)},$.fn.one=function(t,e,i,n){return this.on(t,e,i,n,1)};var w=function(){return!0},b=function(){return!1},O=/^([A-Z]|returnValue$|layer[XY]$)/,x={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};$.fn.delegate=function(t,e,i){return this.on(e,t,i)},$.fn.undelegate=function(t,e,i){return this.off(e,t,i)},$.fn.live=function(t,e){return $(document.body).delegate(this.selector,t,e),this},$.fn.die=function(t,e){return $(document.body).undelegate(this.selector,t,e),this},$.fn.on=function(t,e,i,n,s){var a,l,c=this;return t&&!f(t)?($.each(t,function(t,n){c.on(t,e,i,n,s)}),c):(f(e)||m(n)||n===!1||(n=i,i=e,e=u),(m(i)||i===!1)&&(n=i,i=u),n===!1&&(n=b),c.each(function(c,d){s&&(a=function(t){return r(d,t.type,n),n.apply(this,arguments)}),e&&(l=function(t){var i,s=$(t.target).closest(e,d).get(0);return s&&s!==d?(i=$.extend(h(t),{currentTarget:s,liveFired:d}),(a||n).apply(s,[i].concat(p.call(arguments,1)))):void 0}),o(d,t,n,i,e,l||a)}))},$.fn.off=function(t,e,i){var n=this;return t&&!f(t)?($.each(t,function(t,i){n.off(t,e,i)}),n):(f(e)||m(i)||i===!1||(i=e,e=u),i===!1&&(i=b),n.each(function(){r(this,t,i,e)}))},$.fn.trigger=function(t,e){return t=f(t)||$.isPlainObject(t)?$.Event(t):l(t),t._args=e,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(t):$(this).triggerHandler(t,e)})},$.fn.triggerHandler=function(t,i){var n,s;return this.each(function(a,o){n=h(f(t)?$.Event(t):t),n._args=i,n.target=o,$.each(e(o,t.type||t),function(t,e){return s=e.proxy(n),n.isImmediatePropagationStopped()?!1:void 0})}),s},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){$.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)}}),["focus","blur"].forEach(function(t){$.fn[t]=function(e){return e?this.bind(t,e):this.each(function(){try{this[t]()}catch(e){}}),this}}),$.Event=function(t,e){f(t)||(e=t,t=e.type);var i=document.createEvent(g[t]||"Events"),n=!0;if(e)for(var s in e)"bubbles"==s?n=!!e[s]:i[s]=e[s];return i.initEvent(t,n,!0),l(i)}}(e),function($){function t(t,e,i){var n=$.Event(e);return $(t).trigger(n,i),!n.isDefaultPrevented()}function e(e,i,n,s){return e.global?t(i||f,n,s):void 0}function i(t){t.global&&0===$.active++&&e(t,null,"ajaxStart")}function n(t){t.global&&!--$.active&&e(t,null,"ajaxStop")}function s(t,i){var n=i.context;return i.beforeSend.call(n,t,i)===!1||e(i,n,"ajaxBeforeSend",[t,i])===!1?!1:void e(i,n,"ajaxSend",[t,i])}function a(t,i,n,s){var a=n.context,o="success";n.success.call(a,t,o,i),s&&s.resolveWith(a,[t,o,i]),e(n,a,"ajaxSuccess",[i,n,t]),r(o,i,n)}function o(t,i,n,s,a){var o=s.context;s.error.call(o,n,i,t),a&&a.rejectWith(o,[n,i,t]),e(s,o,"ajaxError",[n,s,t||i]),r(i,n,s)}function r(t,i,s){var a=s.context;s.complete.call(a,i,t),e(s,a,"ajaxComplete",[i,s]),n(s)}function l(){}function h(t){return t&&(t=t.split(";",2)[0]),t&&(t==b?"html":t==w?"json":y.test(t)?"script":C.test(t)&&"xml")||"text"}function c(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function d(t){t.processData&&t.data&&"string"!=$.type(t.data)&&(t.data=$.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()||(t.url=c(t.url,t.data),t.data=void 0)}function u(t,e,i,n){var s=!$.isFunction(e);return{url:t,data:s?e:void 0,success:s?$.isFunction(i)?i:void 0:e,dataType:s?n||i:i}}function p(t,e,i,n){var s,a=$.isArray(e),o=$.isPlainObject(e);$.each(e,function(e,r){s=$.type(r),n&&(e=i?n:n+"["+(o||"object"==s||"array"==s?e:"")+"]"),!n&&a?t.add(r.name,r.value):"array"==s||!i&&"object"==s?p(t,r,i,e):t.add(e,r)})}var m=0,f=window.document,_,g,v=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,y=/^(?:text|application)\/javascript/i,C=/^(?:text|application)\/xml/i,w="application/json",b="text/html",O=/^\s*$/;$.active=0,$.ajaxJSONP=function(t,e){if(!("type"in t))return $.ajax(t);var i=t.jsonpCallback,n=($.isFunction(i)?i():i)||"jsonp"+ ++m,r=f.createElement("script"),l=window[n],h,c=function(t){$(r).triggerHandler("error",t||"abort")},d={abort:c},u;return e&&e.promise(d),$(r).on("load error",function(i,s){clearTimeout(u),$(r).off().remove(),"error"!=i.type&&h?a(h[0],d,t,e):o(null,s||"error",d,t,e),window[n]=l,h&&$.isFunction(l)&&l(h[0]),l=h=void 0}),s(d,t)===!1?(c("abort"),d):(window[n]=function(){h=arguments},r.src=t.url.replace(/\?(.+)=\?/,"?$1="+n),f.head.appendChild(r),t.timeout>0&&(u=setTimeout(function(){c("timeout")},t.timeout)),d)},$.ajaxSettings={type:"GET",beforeSend:l,success:l,error:l,complete:l,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:w,xml:"application/xml, text/xml",html:b,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},$.ajax=function(t){var e=$.extend({},t||{}),n=$.Deferred&&$.Deferred();for(_ in $.ajaxSettings)void 0===e[_]&&(e[_]=$.ajaxSettings[_]);i(e),e.crossDomain||(e.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(e.url)&&RegExp.$2!=window.location.host),e.url||(e.url=window.location.toString()),d(e),e.cache===!1&&(e.url=c(e.url,"_="+Date.now()));var r=e.dataType,u=/\?.+=\?/.test(e.url);if("jsonp"==r||u)return u||(e.url=c(e.url,e.jsonp?e.jsonp+"=?":e.jsonp===!1?"":"callback=?")),$.ajaxJSONP(e,n);var p=e.accepts[r],m={},f=function(t,e){m[t.toLowerCase()]=[t,e]},v=/^([\w-]+:)\/\//.test(e.url)?RegExp.$1:window.location.protocol,y=e.xhr(),C=y.setRequestHeader,w;if(n&&n.promise(y),e.crossDomain||f("X-Requested-With","XMLHttpRequest"),f("Accept",p||"*/*"),(p=e.mimeType||p)&&(p.indexOf(",")>-1&&(p=p.split(",",2)[0]),y.overrideMimeType&&y.overrideMimeType(p)),(e.contentType||e.contentType!==!1&&e.data&&"GET"!=e.type.toUpperCase())&&f("Content-Type",e.contentType||"application/x-www-form-urlencoded"),e.headers)for(g in e.headers)f(g,e.headers[g]);if(y.setRequestHeader=f,y.onreadystatechange=function(){if(4==y.readyState){y.onreadystatechange=l,clearTimeout(w);var t,i=!1;if(y.status>=200&&y.status<300||304==y.status||0==y.status&&"file:"==v){r=r||h(e.mimeType||y.getResponseHeader("content-type")),t=y.responseText;try{"script"==r?(1,eval)(t):"xml"==r?t=y.responseXML:"json"==r&&(t=O.test(t)?null:$.parseJSON(t))}catch(s){i=s}i?o(i,"parsererror",y,e,n):a(t,y,e,n)}else o(y.statusText||null,y.status?"error":"abort",y,e,n)}},s(y,e)===!1)return y.abort(),o(null,"abort",y,e,n),y;if(e.xhrFields)for(g in e.xhrFields)y[g]=e.xhrFields[g];var b="async"in e?e.async:!0;y.open(e.type,e.url,b,e.username,e.password);for(g in m)C.apply(y,m[g]);return e.timeout>0&&(w=setTimeout(function(){y.onreadystatechange=l,y.abort(),o(null,"timeout",y,e,n)},e.timeout)),y.send(e.data?e.data:null),y},$.get=function(t,e,i,n){return $.ajax(u.apply(null,arguments))},$.post=function(t,e,i,n){var s=u.apply(null,arguments);return s.type="POST",$.ajax(s)},$.getJSON=function(t,e,i){var n=u.apply(null,arguments);return n.dataType="json",$.ajax(n)},$.fn.load=function(t,e,i){if(!this.length)return this;var n=this,s=t.split(/\s/),a,o=u(t,e,i),r=o.success;return s.length>1&&(o.url=s[0],a=s[1]),o.success=function(t){n.html(a?$("<div>").html(t.replace(v,"")).find(a):t),r&&r.apply(n,arguments)},$.ajax(o),this};var x=encodeURIComponent;$.param=function(t,e){var i=[];return i.add=function(t,e){this.push(x(t)+"="+x(e))},p(i,t,e),i.join("&").replace(/%20/g,"+")}}(e),function($){$.fn.serializeArray=function(){var t=[],e;return $([].slice.call(this.get(0).elements)).each(function(){e=$(this);var i=e.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&("radio"!=i&&"checkbox"!=i||this.checked)&&t.push({name:e.attr("name"),value:e.val()})}),t},$.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},$.fn.submit=function(t){if(t)this.bind("submit",t);else if(this.length){var e=$.Event("submit");this.eq(0).trigger(e),e.isDefaultPrevented()||this.get(0).submit()}return this}}(e),function($){"__proto__"in{}||$.extend($.zepto,{Z:function(t,e){return t=t||[],$.extend(t,$.fn),t.selector=e||"",t.__Z=!0,t},isZ:function(t){return"array"===$.type(t)&&"__Z"in t}});try{getComputedStyle(void 0)}catch(t){var e=getComputedStyle;window.getComputedStyle=function(t){try{return e(t)}catch(i){return null}}}}(e),t.getJSON=e.getJSON,t.ajax=e.ajax}(VCO),VCO.Class=function(){},VCO.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments)},i=function(){};i.prototype=this.prototype;var n=new i;n.constructor=e,e.prototype=n,e.superclass=this.prototype;for(var s in this)this.hasOwnProperty(s)&&"prototype"!==s&&"superclass"!==s&&(e[s]=this[s]);return t.statics&&(VCO.Util.extend(e,t.statics),delete t.statics),t.includes&&(VCO.Util.extend.apply(null,[n].concat(t.includes)),delete t.includes),t.options&&n.options&&(t.options=VCO.Util.extend({},n.options,t.options)),VCO.Util.extend(n,t),e.extend=VCO.Class.extend,e.include=function(t){VCO.Util.extend(this.prototype,t)},e},VCO.Events={addEventListener:function(t,e,i){var n=this._vco_events=this._vco_events||{};return n[t]=n[t]||[],n[t].push({action:e,context:i||this}),this},hasEventListeners:function(t){var e="_vco_events";return e in this&&t in this[e]&&this[e][t].length>0},removeEventListener:function(t,e,i){if(!this.hasEventListeners(t))return this;for(var n=0,s=this._vco_events,a=s[t].length;a>n;n++)if(s[t][n].action===e&&(!i||s[t][n].context===i))return s[t].splice(n,1),this;return this},fireEvent:function(t,e){if(!this.hasEventListeners(t))return this;for(var i=VCO.Util.extend({type:t,target:this},e),n=this._vco_events[t].slice(),s=0,a=n.length;a>s;s++)n[s].action.call(n[s].context||this,i);return this}},VCO.Events.on=VCO.Events.addEventListener,VCO.Events.off=VCO.Events.removeEventListener,VCO.Events.fire=VCO.Events.fireEvent,function(){var t=navigator.userAgent.toLowerCase(),e=document.documentElement,i="ActiveXObject"in window,n=-1!==t.indexOf("webkit"),s=-1!==t.indexOf("phantom"),a=-1!==t.search("android [23]"),o="undefined"!=typeof orientation,r=navigator.msPointerEnabled&&navigator.msMaxTouchPoints&&!window.PointerEvent,l=window.PointerEvent&&navigator.pointerEnabled&&navigator.maxTouchPoints||r,h=i&&"transition"in e.style,c="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!a,d="MozPerspective"in e.style,u="OTransition"in e.style,p=window.opera,m="devicePixelRatio"in window&&window.devicePixelRatio>1;if(!m&&"matchMedia"in window){var f=window.matchMedia("(min-resolution:144dpi)");m=f&&f.matches}var _=!window.L_NO_TOUCH&&!s&&(l||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch);VCO.Browser={ie:i,ielt9:i&&!document.addEventListener,webkit:n,firefox:-1!==t.indexOf("gecko")&&!n&&!window.opera&&!i,android:-1!==t.indexOf("android"),android23:a,chrome:-1!==t.indexOf("chrome"),ie3d:h,webkit3d:c,gecko3d:d,opera3d:u,any3d:!window.L_DISABLE_3D&&(h||c||d||u)&&!s,mobile:o,mobileWebkit:o&&n,mobileWebkit3d:o&&c,mobileOpera:o&&window.opera,touch:!!_,msPointer:!!r,pointer:!!l,retina:!!m,orientation:function(){var t=window.innerWidth,e=window.innerHeight,i="portrait";return t>e&&(i="landscape"),90==Math.abs(window.orientation),trace(i),i}}}(),VCO.Load=function(t){function e(t){var e=0,n=!1;for(e=0;e<i.length;e++)i[e]==t&&(n=!0);return n?!0:(i.push(t),!1)}var i=[];return{css:function(t,i,n,s){e(t)?i():VCO.LoadIt.css(t,i,n,s)},js:function(t,i,n,s){e(t)?i():VCO.LoadIt.js(t,i,n,s)}}}(this.document),VCO.LoadIt=function(t){function e(e,i){var n=t.createElement(e),s;for(s in i)i.hasOwnProperty(s)&&n.setAttribute(s,i[s]);return n}function i(t){var e=h[t],i,n;e&&(i=e.callback,n=e.urls,n.shift(),c=0,n.length||(i&&i.call(e.context,e.obj),h[t]=null,d[t].length&&s(t)))}function n(){var e=navigator.userAgent;r={async:t.createElement("script").async===!0},(r.webkit=/AppleWebKit\//.test(e))||(r.ie=/MSIE/.test(e))||(r.opera=/Opera/.test(e))||(r.gecko=/Gecko\//.test(e))||(r.unknown=!0)}function s(s,c,u,p,m){var f=function(){i(s)},_="css"===s,g=[],v,y,C,w,b,O;if(r||n(),c)if(c="string"==typeof c?[c]:c.concat(),_||r.async||r.gecko||r.opera)d[s].push({urls:c,callback:u,obj:p,context:m});
else for(v=0,y=c.length;y>v;++v)d[s].push({urls:[c[v]],callback:v===y-1?u:null,obj:p,context:m});if(!h[s]&&(w=h[s]=d[s].shift())){for(l||(l=t.head||t.getElementsByTagName("head")[0]),b=w.urls,v=0,y=b.length;y>v;++v)O=b[v],_?C=r.gecko?e("style"):e("link",{href:O,rel:"stylesheet"}):(C=e("script",{src:O}),C.async=!1),C.className="lazyload",C.setAttribute("charset","utf-8"),r.ie&&!_?C.onreadystatechange=function(){/loaded|complete/.test(C.readyState)&&(C.onreadystatechange=null,f())}:_&&(r.gecko||r.webkit)?r.webkit?(w.urls[v]=C.href,o()):(C.innerHTML='@import "'+O+'";',a(C)):C.onload=C.onerror=f,g.push(C);for(v=0,y=g.length;y>v;++v)l.appendChild(g[v])}}function a(t){var e;try{e=!!t.sheet.cssRules}catch(n){return c+=1,void(200>c?setTimeout(function(){a(t)},50):e&&i("css"))}i("css")}function o(){var t=h.css,e;if(t){for(e=u.length;--e>=0;)if(u[e].href===t.urls[0]){i("css");break}c+=1,t&&(200>c?setTimeout(o,50):i("css"))}}var r,l,h={},c=0,d={css:[],js:[]},u=t.styleSheets;return{css:function(t,e,i,n){s("css",t,e,i,n)},js:function(t,e,i,n){s("js",t,e,i,n)}}}(this.document),VCO.Language={name:"English",lang:"en",messages:{loading:"Loading",wikipedia:"From Wikipedia, the free encyclopedia"},buttons:{map_overview:"Map Overview",overview:"Overview",backtostart:"Back To Beginning",collapse_toggle:"Hide Map",uncollapse_toggle:"Show Map"}},VCO.Easings={ease:[.25,.1,.25,1],linear:[0,0,1,1],easein:[.42,0,1,1],easeout:[0,0,.58,1],easeinout:[.42,0,.58,1]},VCO.Ease={KeySpline:function(t){function e(t,e){return 1-3*e+3*t}function i(t,e){return 3*e-6*t}function n(t){return 3*t}function s(t,s,a){return((e(s,a)*t+i(s,a))*t+n(s))*t}function a(t,s,a){return 3*e(s,a)*t*t+2*i(s,a)*t+n(s)}function o(e){for(var i=e,n=0;4>n;++n){var o=a(i,t[0],t[2]);if(0==o)return i;var r=s(i,t[0],t[2])-e;i-=r/o}return i}this.get=function(e){return t[0]==t[1]&&t[2]==t[3]?e:s(o(e),t[1],t[3])}},easeInSpline:function(t){var e=new VCO.Ease.KeySpline(VCO.Easings.easein);return e.get(t)},easeInOutExpo:function(t){var e=new VCO.Ease.KeySpline(VCO.Easings.easein);return e.get(t)},easeOut:function(t){return Math.sin(t*Math.PI/2)},easeOutStrong:function(t){return 1==t?1:1-Math.pow(2,-10*t)},easeIn:function(t){return t*t},easeInStrong:function(t){return 0==t?0:Math.pow(2,10*(t-1))},easeOutBounce:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInBack:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},bounce:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bouncePast:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?2-(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?2-(7.5625*(t-=2.25/2.75)*t+.9375):2-(7.5625*(t-=2.625/2.75)*t+.984375)},swingTo:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},swingFrom:function(t){var e=1.70158;return t*t*((e+1)*t-e)},elastic:function(t){return-1*Math.pow(4,-8*t)*Math.sin(2*(6*t-1)*Math.PI/2)+1},spring:function(t){return 1-Math.cos(4.5*t*Math.PI)*Math.exp(6*-t)},blink:function(t,e){return Math.round(t*(e||5))%2},pulse:function(t,e){return-Math.cos(t*((e||5)-.5)*2*Math.PI)/2+.5},wobble:function(t){return-Math.cos(t*Math.PI*9*t)/2+.5},sinusoidal:function(t){return-Math.cos(t*Math.PI)/2+.5},flicker:function(t){var t=t+(Math.random()-.5)/5;return easings.sinusoidal(0>t?0:t>1?1:t)},mirror:function(t){return easings.sinusoidal(.5>t?2*t:1-2*(t-.5))},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return.5>t?2*t*t:-1+(4-2*t)*t},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return.5>t?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return.5>t?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return.5>t?16*t*t*t*t*t:1+16*--t*t*t*t*t}},VCO.Animate=function(t,e){var i=new vcoanimate(t,e),n;return i},window.vcoanimate=function(){function t(t,e,i){if(Array.prototype.indexOf)return t.indexOf(e);for(i=0;i<t.length;++i)if(t[i]===e)return i}function e(t){var i,n=I.length;for(C&&t>1e12&&(t=w()),O&&(t=w()),i=n;i--;)I[i](t);I.length&&j(e)}function i(t){1===I.push(t)&&j(e)}function n(e){var i,n=t(I,e);n>=0&&(i=I.slice(n+1),I.length=n,I=I.concat(i))}function s(t,e){var i={},n;return(n=t.match(k))&&(i.rotate=f(n[1],e?e.rotate:null)),(n=t.match(E))&&(i.scale=f(n[1],e?e.scale:null)),(n=t.match(T))&&(i.skewx=f(n[1],e?e.skewx:null),i.skewy=f(n[3],e?e.skewy:null)),(n=t.match(L))&&(i.translatex=f(n[1],e?e.translatex:null),i.translatey=f(n[3],e?e.translatey:null)),i}function a(t){var e="";return"rotate"in t&&(e+="rotate("+t.rotate+"deg) "),"scale"in t&&(e+="scale("+t.scale+") "),"translatex"in t&&(e+="translate("+t.translatex+"px,"+t.translatey+"px) "),"skewx"in t&&(e+="skew("+t.skewx+"deg,"+t.skewy+"deg)"),e}function o(t,e,i){return"#"+(1<<24|t<<16|e<<8|i).toString(16).slice(1)}function r(t){var e=t.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);return(e?o(e[1],e[2],e[3]):t).replace(/#(\w)(\w)(\w)$/,"#$1$1$2$2$3$3")}function l(t){return t.replace(/-(.)/g,function(t,e){return e.toUpperCase()})}function h(t){return"function"==typeof t}function c(t){return Math.sin(t*Math.PI/2)}function d(t,e,s,a,o,r){function l(t){var i=t-m;return i>d||f?(r=isFinite(r)?r:1,f?g&&e(r):e(r),n(l),s&&s.apply(u)):void e(isFinite(r)?p*a(i/d)+o:a(i/d))}a=h(a)?a:_.easings[a]||c;var d=t||x,u=this,p=r-o,m=w(),f=0,g=0;return i(l),{stop:function(t){f=1,g=t,t||(s=null)}}}function u(t,e){var i=t.length,n=[],s,a;for(s=0;i>s;++s)n[s]=[t[s][0],t[s][1]];for(a=1;i>a;++a)for(s=0;i-a>s;++s)n[s][0]=(1-e)*n[s][0]+e*n[parseInt(s+1,10)][0],n[s][1]=(1-e)*n[s][1]+e*n[parseInt(s+1,10)][1];return[n[0][0],n[0][1]]}function p(t,e,i){var n=[],s,a,o,r;for(s=0;6>s;s++)o=Math.min(15,parseInt(e.charAt(s),16)),r=Math.min(15,parseInt(i.charAt(s),16)),a=Math.floor((r-o)*t+o),a=a>15?15:0>a?0:a,n[s]=a.toString(16);return"#"+n.join("")}function m(t,e,i,n,s,a,o){if("transform"==s){o={};for(var r in i[a][s])o[r]=r in n[a][s]?Math.round(((n[a][s][r]-i[a][s][r])*t+i[a][s][r])*x)/x:i[a][s][r];return o}return"string"==typeof i[a][s]?p(t,i[a][s],n[a][s]):(o=Math.round(((n[a][s]-i[a][s])*t+i[a][s])*x)/x,s in S||(o+=e[a][s]||"px"),o)}function f(t,e,i,n,s){return(i=M.exec(t))?(s=parseFloat(i[2]))&&e+("+"==i[1]?1:-1)*s:parseFloat(t)}function _(t,e){var i=t?i=isFinite(t.length)?t:[t]:[],n,o=e.complete,c=e.duration,p=e.easing,_=e.bezier,g=[],v=[],y=[],C=[],w,b;for(_&&(w=e.left,b=e.top,delete e.right,delete e.bottom,delete e.left,delete e.top),n=i.length;n--;){if(g[n]={},v[n]={},y[n]={},_){var O=P(i[n],"left"),x=P(i[n],"top"),M=[f(h(w)?w(i[n]):w||0,parseFloat(O)),f(h(b)?b(i[n]):b||0,parseFloat(x))];C[n]=h(_)?_(i[n],M):_,C[n].push(M),C[n].unshift([parseInt(O,10),parseInt(x,10)])}for(var k in e){switch(k){case"complete":case"duration":case"easing":case"bezier":continue}var E=P(i[n],k),T,L=h(e[k])?e[k](i[n]):e[k];"string"!=typeof L||!V.test(L)||V.test(E)?(g[n][k]="transform"==k?s(E):"string"==typeof L&&V.test(L)?r(E).slice(1):parseFloat(E),v[n][k]="transform"==k?s(L,g[n][k]):"string"==typeof L&&"#"==L.charAt(0)?r(L).slice(1):f(L,parseFloat(E)),"string"==typeof L&&(T=L.match(D))&&(y[n][k]=T[1])):delete e[k]}}return d.apply(i,[c,function(t,s,o){for(n=i.length;n--;){_&&(o=u(C[n],t),i[n].style.left=o[0]+"px",i[n].style.top=o[1]+"px");for(var r in e)s=m(t,y,g,v,r,n),"transform"==r?i[n].style[A]=a(s):"opacity"!=r||N?i[n].style[l(r)]=s:i[n].style.filter="alpha(opacity="+100*s+")"}},o,p])}var g=document,v=window,y=v.performance,C=y&&(y.now||y.webkitNow||y.msNow||y.mozNow),w=C?function(){return C.call(y)}:function(){return+new Date},b=g.documentElement,O=!1,x=1e3,V=/^rgb\(|#/,M=/^([+\-])=([\d\.]+)/,D=/^(?:[\+\-]=?)?\d+(?:\.\d+)?(%|in|cm|mm|em|ex|pt|pc|px)$/,k=/rotate\(((?:[+\-]=)?([\-\d\.]+))deg\)/,E=/scale\(((?:[+\-]=)?([\d\.]+))\)/,T=/skew\(((?:[+\-]=)?([\-\d\.]+))deg, ?((?:[+\-]=)?([\-\d\.]+))deg\)/,L=/translate\(((?:[+\-]=)?([\-\d\.]+))px, ?((?:[+\-]=)?([\-\d\.]+))px\)/,S={lineHeight:1,zoom:1,zIndex:1,opacity:1,transform:1},A=function(){var t=g.createElement("a").style,e=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],i;for(i=0;i<e.length;i++)if(e[i]in t)return e[i]}(),N=function(){return"undefined"!=typeof g.createElement("a").style.opacity}(),P=g.defaultView&&g.defaultView.getComputedStyle?function(t,e){e="transform"==e?A:e,e=l(e);var i=null,n=g.defaultView.getComputedStyle(t,"");return n&&(i=n[e]),t.style[e]||i}:b.currentStyle?function(t,e){if(e=l(e),"opacity"==e){var i=100;try{i=t.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(n){try{i=t.filters("alpha").opacity}catch(s){}}return i/100}var a=t.currentStyle?t.currentStyle[e]:null;return t.style[e]||a}:function(t,e){return t.style[l(e)]},j=function(){return v.requestAnimationFrame||v.webkitRequestAnimationFrame||v.mozRequestAnimationFrame||v.msRequestAnimationFrame||v.oRequestAnimationFrame||function(t){v.setTimeout(function(){t(+new Date)},17)}}(),I=[];return j(function(t){O=t>1e12!=w()>1e12}),_.tween=d,_.getStyle=P,_.bezier=u,_.transform=A,_.parseTransform=s,_.formatTransform=a,_.easings={},_}(),VCO.Point=function(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e},VCO.Point.prototype={add:function(t){return this.clone()._add(t)},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(t)},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t,e){return new VCO.Point(this.x/t,this.y/t,e)},multiplyBy:function(t){return new VCO.Point(this.x*t,this.y*t)},distanceTo:function(t){var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},clone:function(){return new VCO.Point(this.x,this.y)},toString:function(){return"Point("+VCO.Util.formatNum(this.x)+", "+VCO.Util.formatNum(this.y)+")"}},VCO.DomMixins={show:function(t){t||(this._el.container.style.display="block")},hide:function(t){this._el.container.style.display="none"},addTo:function(t){t.appendChild(this._el.container),this.onAdd()},removeFrom:function(t){t.removeChild(this._el.container),this.onRemove()},animatePosition:function(t,e){var i={duration:this.options.duration,easing:this.options.ease};for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n]+"px");this.animator&&this.animator.stop(),this.animator=VCO.Animate(e,i)},onLoaded:function(){this.fire("loaded",this.data)},onAdd:function(){this.fire("added",this.data)},onRemove:function(){this.fire("removed",this.data)},setPosition:function(t,e){for(var i in t)t.hasOwnProperty(i)&&(e?e.style[i]=t[i]+"px":this._el.container.style[i]=t[i]+"px")},getPosition:function(){return VCO.Dom.getPosition(this._el.container)}},VCO.Dom={get:function(t){return"string"==typeof t?document.getElementById(t):t},getByClass:function(t){return t?document.getElementsByClassName(t):void 0},create:function(t,e,i){var n=document.createElement(t);return n.className=e,i&&i.appendChild(n),n},createText:function(t,e){var i=document.createTextNode(t);return e&&e.appendChild(i),i},getTranslateString:function(t){return VCO.Dom.TRANSLATE_OPEN+t.x+"px,"+t.y+"px"+VCO.Dom.TRANSLATE_CLOSE},setPosition:function(t,e){t._vco_pos=e,VCO.Browser.webkit3d?(t.style[VCO.Dom.TRANSFORM]=VCO.Dom.getTranslateString(e),VCO.Browser.android&&(t.style["-webkit-perspective"]="1000",t.style["-webkit-backface-visibility"]="hidden")):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){for(var e={x:0,y:0};t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)e.x+=t.offsetLeft,e.y+=t.offsetTop,t=t.offsetParent;return e},testProp:function(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}},VCO.Util.extend(VCO.Dom,{TRANSITION:VCO.Dom.testProp(["transition","webkitTransition","OTransition","MozTransition","msTransition"]),TRANSFORM:VCO.Dom.testProp(["transformProperty","WebkitTransform","OTransform","MozTransform","msTransform"]),TRANSLATE_OPEN:"translate"+(VCO.Browser.webkit3d?"3d(":"("),TRANSLATE_CLOSE:VCO.Browser.webkit3d?",0)":")"}),VCO.DomUtil={get:function(t){return"string"==typeof t?document.getElementById(t):t},getStyle:function(t,e){var i=t.style[e];if(!i&&t.currentStyle&&(i=t.currentStyle[e]),!i||"auto"===i){var n=document.defaultView.getComputedStyle(t,null);i=n?n[e]:null}return"auto"===i?null:i},getViewportOffset:function(t){var e=0,i=0,n=t,s=document.body;do{if(e+=n.offsetTop||0,i+=n.offsetLeft||0,n.offsetParent===s&&"absolute"===VCO.DomUtil.getStyle(n,"position"))break;n=n.offsetParent}while(n);n=t;do{if(n===s)break;e-=n.scrollTop||0,i-=n.scrollLeft||0,n=n.parentNode}while(n);return new VCO.Point(i,e)},create:function(t,e,i){var n=document.createElement(t);return n.className=e,i&&i.appendChild(n),n},disableTextSelection:function(){document.selection&&document.selection.empty&&document.selection.empty(),this._onselectstart||(this._onselectstart=document.onselectstart,document.onselectstart=VCO.Util.falseFn)},enableTextSelection:function(){document.onselectstart=this._onselectstart,this._onselectstart=null},hasClass:function(t,e){return t.className.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)},addClass:function(t,e){VCO.DomUtil.hasClass(t,e)||(t.className+=(t.className?" ":"")+e)},removeClass:function(t,e){t.className=t.className.replace(/(\S+)\s*/g,function(t,i){return i===e?"":t}).replace(/^\s+/,"")},setOpacity:function(t,e){VCO.Browser.ie?t.style.filter="alpha(opacity="+Math.round(100*e)+")":t.style.opacity=e},testProp:function(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1},getTranslateString:function(t){return VCO.DomUtil.TRANSLATE_OPEN+t.x+"px,"+t.y+"px"+VCO.DomUtil.TRANSLATE_CLOSE},getScaleString:function(t,e){var i=VCO.DomUtil.getTranslateString(e),n=" scale("+t+") ",s=VCO.DomUtil.getTranslateString(e.multiplyBy(-1));return i+n+s},setPosition:function(t,e){t._vco_pos=e,VCO.Browser.webkit3d?(t.style[VCO.DomUtil.TRANSFORM]=VCO.DomUtil.getTranslateString(e),VCO.Browser.android&&(t.style["-webkit-perspective"]="1000",t.style["-webkit-backface-visibility"]="hidden")):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._vco_pos}},VCO.DomEvent={addListener:function(t,e,i,n){var s=VCO.Util.stamp(i),a="_vco_"+e+s;if(!t[a]){var o=function(e){return i.call(n||t,e||VCO.DomEvent._getEvent())};if(VCO.Browser.touch&&"dblclick"===e&&this.addDoubleTapListener)this.addDoubleTapListener(t,o,s);else if("addEventListener"in t)if("mousewheel"===e)t.addEventListener("DOMMouseScroll",o,!1),t.addEventListener(e,o,!1);else if("mouseenter"===e||"mouseleave"===e){var r=o,l="mouseenter"===e?"mouseover":"mouseout";o=function(e){return VCO.DomEvent._checkMouse(t,e)?r(e):void 0},t.addEventListener(l,o,!1)}else t.addEventListener(e,o,!1);else"attachEvent"in t&&t.attachEvent("on"+e,o);t[a]=o}},removeListener:function(t,e,i){var n=VCO.Util.stamp(i),s="_vco_"+e+n,a=t[s];a&&(VCO.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,n):"removeEventListener"in t?"mousewheel"===e?(t.removeEventListener("DOMMouseScroll",a,!1),t.removeEventListener(e,a,!1)):"mouseenter"===e||"mouseleave"===e?t.removeEventListener("mouseenter"===e?"mouseover":"mouseout",a,!1):t.removeEventListener(e,a,!1):"detachEvent"in t&&t.detachEvent("on"+e,a),t[s]=null)},_checkMouse:function(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(n){return!1}return i!==t},_getEvent:function(){var t=window.event;if(!t)for(var e=arguments.callee.caller;e&&(t=e.arguments[0],!t||window.Event!==t.constructor);)e=e.caller;return t},stopPropagation:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},disableClickPropagation:function(t){VCO.DomEvent.addListener(t,VCO.Draggable.START,VCO.DomEvent.stopPropagation),VCO.DomEvent.addListener(t,"click",VCO.DomEvent.stopPropagation),VCO.DomEvent.addListener(t,"dblclick",VCO.DomEvent.stopPropagation)},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},stop:function(t){VCO.DomEvent.preventDefault(t),VCO.DomEvent.stopPropagation(t)},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e}},VCO.Draggable=VCO.Class.extend({includes:VCO.Events,_el:{},mousedrag:{down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},touchdrag:{down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},initialize:function(t,e,i){this._el={drag:t,move:t},i&&(this._el.move=i),this.options={enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:!1,right:!1},momentum_multiplier:2e3,duration:1e3,ease:VCO.Ease.easeInOutQuint},this.animator=null,this.dragevent=this.mousedrag,VCO.Browser.touch&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},VCO.Util.mergeData(this.options,e)},enable:function(t){this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"},disable:function(){VCO.DomEvent.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),VCO.DomEvent.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)},stopMomentum:function(){this.animator&&this.animator.stop()},updateConstraint:function(t){this.options.constraint=t},_onDragStart:function(t){VCO.Browser.touch?t.originalEvent?(this.data.pagex.start=t.originalEvent.touches[0].screenX,this.data.pagey.start=t.originalEvent.touches[0].screenY):(this.data.pagex.start=t.targetTouches[0].screenX,this.data.pagey.start=t.targetTouches[0].screenY):(this.data.pagex.start=t.pageX,this.data.pagey.start=t.pageY),this.options.enable.x&&(this._el.move.style.left=this.data.pagex.start-this._el.move.offsetWidth/2+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.pagey.start-this._el.move.offsetHeight/2+"px"),this.data.pos.start=VCO.Dom.getPosition(this._el.drag),this.data.time.start=(new Date).getTime(),this.fire("dragstart",this.data),VCO.DomEvent.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),VCO.DomEvent.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)},_onDragEnd:function(t){this.data.sliding=!1,VCO.DomEvent.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),VCO.DomEvent.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()},_onDragMove:function(t){t.preventDefault(),this.data.sliding=!0,VCO.Browser.touch?t.originalEvent?(this.data.pagex.end=t.originalEvent.touches[0].screenX,this.data.pagey.end=t.originalEvent.touches[0].screenY):(this.data.pagex.end=t.targetTouches[0].screenX,this.data.pagey.end=t.targetTouches[0].screenY):(this.data.pagex.end=t.pageX,this.data.pagey.end=t.pageY),this.data.pos.end=VCO.Dom.getPosition(this._el.drag),this.data.new_pos.x=-(this.data.pagex.start-this.data.pagex.end-this.data.pos.start.x),this.data.new_pos.y=-(this.data.pagey.start-this.data.pagey.end-this.data.pos.start.y),this.options.enable.x&&(this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)},_momentum:function(){var t={x:0,y:0,time:0},e={x:0,y:0,time:0},i=!1,n="";VCO.Browser.touch,t.time=10*((new Date).getTime()-this.data.time.start),e.time=10*((new Date).getTime()-this.data.time.start),e.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),e.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),t.x=Math.round(e.x/e.time),t.y=Math.round(e.y/e.time),this.data.new_pos.x=Math.min(this.data.pos.end.x+t.x),this.data.new_pos.y=Math.min(this.data.pos.end.y+t.y),this.options.enable.x?this.data.new_pos.x<0&&(this.data.new_pos.x=0):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,e.time<3e3&&(i=!0),Math.abs(e.x)>1e4&&(this.data.direction="left",e.x>0&&(this.data.direction="right")),Math.abs(e.y)>1e4&&(this.data.direction="up",e.y>0&&(this.data.direction="down")),this._animateMomentum(),i&&this.fire("swipe_"+this.data.direction,this.data)},_animateMomentum:function(){var t={x:this.data.new_pos.x,y:this.data.new_pos.y},e={duration:this.options.duration,easing:VCO.Ease.easeOutStrong};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(t.y>this.options.constraint.bottom?t.y=this.options.constraint.bottom:t.y<this.options.constraint.top&&(t.y=this.options.constraint.top)),e.top=Math.floor(t.y)+"px"),this.options.enable.x&&((this.options.constraint.left||this.options.constraint.right)&&(t.x>this.options.constraint.left?t.x=this.options.constraint.left:t.x<this.options.constraint.right&&(t.x=this.options.constraint.right)),e.left=Math.floor(t.x)+"px"),this.animator=VCO.Animate(this._el.move,e),this.fire("momentum",this.data)}}),VCO.Swipable=VCO.Class.extend({includes:VCO.Events,_el:{},mousedrag:{down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},touchdrag:{down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},initialize:function(t,e,i){this._el={drag:t,move:t},e&&(this._el.move=e),this.options={snap:!1,enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:0,right:!1},momentum_multiplier:2e3,duration:1e3,ease:VCO.Ease.easeInOutQuint},this.animator=null,this.dragevent=this.mousedrag,VCO.Browser.touch&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},VCO.Util.mergeData(this.options,i)},enable:function(t){VCO.DomEvent.addListener(this._el.drag,this.dragevent.down,this._onDragStart,this),VCO.DomEvent.addListener(this._el.drag,this.dragevent.up,this._onDragEnd,this),this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"},disable:function(){VCO.DomEvent.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),VCO.DomEvent.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)},stopMomentum:function(){this.animator&&this.animator.stop()},updateConstraint:function(t){this.options.constraint=t},_onDragStart:function(t){this.animator&&this.animator.stop(),VCO.Browser.touch?t.originalEvent?(this.data.pagex.start=t.originalEvent.touches[0].screenX,this.data.pagey.start=t.originalEvent.touches[0].screenY):(this.data.pagex.start=t.targetTouches[0].screenX,this.data.pagey.start=t.targetTouches[0].screenY):(this.data.pagex.start=t.pageX,this.data.pagey.start=t.pageY),this.options.enable.x,this.options.enable.y,this.data.pos.start={x:this._el.move.offsetLeft,y:this._el.move.offsetTop},this.data.time.start=(new Date).getTime(),this.fire("dragstart",this.data),VCO.DomEvent.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),VCO.DomEvent.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)},_onDragEnd:function(t){this.data.sliding=!1,VCO.DomEvent.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),VCO.DomEvent.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()},_onDragMove:function(t){var e={x:0,y:0};this.data.sliding=!0,VCO.Browser.touch?t.originalEvent?(this.data.pagex.end=t.originalEvent.touches[0].screenX,this.data.pagey.end=t.originalEvent.touches[0].screenY):(this.data.pagex.end=t.targetTouches[0].screenX,this.data.pagey.end=t.targetTouches[0].screenY):(this.data.pagex.end=t.pageX,this.data.pagey.end=t.pageY),e.x=this.data.pagex.start-this.data.pagex.end,e.y=this.data.pagey.start-this.data.pagey.end,this.data.pos.end={x:this._el.drag.offsetLeft,y:this._el.drag.offsetTop},this.data.new_pos.x=-(e.x-this.data.pos.start.x),this.data.new_pos.y=-(e.y-this.data.pos.start.y),this.options.enable.x&&Math.abs(e.x)>Math.abs(e.y)&&(t.preventDefault(),this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&Math.abs(e.y)>Math.abs(e.y)&&(t.preventDefault(),this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)},_momentum:function(){var t={x:0,y:0,time:0},e={x:0,y:0,time:0},i={x:!1,y:!1},n=!1,s="";this.data.direction=null,t.time=10*((new Date).getTime()-this.data.time.start),e.time=10*((new Date).getTime()-this.data.time.start),e.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),e.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),t.x=Math.round(e.x/e.time),t.y=Math.round(e.y/e.time),this.data.new_pos.x=Math.min(this.data.pos.end.x+t.x),this.data.new_pos.y=Math.min(this.data.pos.end.y+t.y),this.options.enable.x?this.data.new_pos.x>0&&(this.data.new_pos.x=0):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,e.time<2e3&&(n=!0),this.options.enable.x&&this.options.enable.y?Math.abs(e.x)>Math.abs(e.y)?i.x=!0:i.y=!0:this.options.enable.x?Math.abs(e.x)>Math.abs(e.y)&&(i.x=!0):Math.abs(e.y)>Math.abs(e.x)&&(i.y=!0),i.x&&(Math.abs(e.x)>this._el.drag.offsetWidth/2&&(n=!0),Math.abs(e.x)>1e4&&(this.data.direction="left",e.x>0&&(this.data.direction="right"))),i.y&&(Math.abs(e.y)>this._el.drag.offsetHeight/2&&(n=!0),Math.abs(e.y)>1e4&&(this.data.direction="up",e.y>0&&(this.data.direction="down"))),this._animateMomentum(),n&&this.data.direction?this.fire("swipe_"+this.data.direction,this.data):this.data.direction?this.fire("swipe_nodirection",this.data):this.options.snap&&(this.animator.stop(),this.animator=VCO.Animate(this._el.move,{top:this.data.pos.start.y,left:this.data.pos.start.x,duration:this.options.duration,easing:VCO.Ease.easeOutStrong}))},_animateMomentum:function(){var t={x:this.data.new_pos.x,y:this.data.new_pos.y},e={duration:this.options.duration,easing:VCO.Ease.easeOutStrong};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(t.y>this.options.constraint.bottom?t.y=this.options.constraint.bottom:t.y<this.options.constraint.top&&(t.y=this.options.constraint.top)),e.top=Math.floor(t.y)+"px"),this.options.enable.x&&((this.options.constraint.left||this.options.constraint.right)&&(t.x>=this.options.constraint.left?t.x=this.options.constraint.left:t.x<this.options.constraint.right&&(t.x=this.options.constraint.right)),e.left=Math.floor(t.x)+"px"),this.animator=VCO.Animate(this._el.move,e),this.fire("momentum",this.data)}}),VCO.MenuBar=VCO.Class.extend({includes:[VCO.Events,VCO.DomMixins],_el:{},initialize:function(t,e,i){this._el={parent:{},container:{},button_overview:{},button_backtostart:{},button_collapse_toggle:{},arrow:{},line:{},coverbar:{},grip:{}},this.collapsed=!1,this._el.container="object"==typeof t?t:VCO.Dom.get(t),e&&(this._el.parent=e),this.options={width:600,height:600,duration:1e3,ease:VCO.Ease.easeInOutQuint,menubar_default_y:0},this.animator={},VCO.Util.mergeData(this.options,i),this._initLayout(),this._initEvents()},show:function(t){var e=this.options.duration;t&&(e=t)},hide:function(t){},setSticky:function(t){this.options.menubar_default_y=t},setColor:function(t){this._el.container.className=t?"vco-menubar vco-menubar-inverted":"vco-menubar"},updateDisplay:function(t,e,i,n){this._updateDisplay(t,e,i,n)},_onButtonOverview:function(t){this.fire("overview",t)},_onButtonBackToStart:function(t){this.fire("back_to_start",t)},_onButtonCollapseMap:function(t){this.collapsed?(this.collapsed=!1,this.show(),this._el.button_overview.style.display="inline",this.fire("collapse",{y:this.options.menubar_default_y}),this._el.button_collapse_toggle.innerHTML=VCO.Browser.mobile?"<span class='vco-icon-arrow-up'></span>":VCO.Language.buttons.collapse_toggle+"<span class='vco-icon-arrow-up'></span>"):(this.collapsed=!0,this.hide(25),this._el.button_overview.style.display="none",this.fire("collapse",{y:1}),this._el.button_collapse_toggle.innerHTML=VCO.Browser.mobile?"<span class='vco-icon-arrow-down'></span>":VCO.Language.buttons.uncollapse_toggle+"<span class='vco-icon-arrow-down'></span>")},_initLayout:function(){this._el.button_overview=VCO.Dom.create("span","vco-menubar-button",this._el.container),VCO.DomEvent.addListener(this._el.button_overview,"click",this._onButtonOverview,this),this._el.button_backtostart=VCO.Dom.create("span","vco-menubar-button",this._el.container),VCO.DomEvent.addListener(this._el.button_backtostart,"click",this._onButtonBackToStart,this),this._el.button_collapse_toggle=VCO.Dom.create("span","vco-menubar-button",this._el.container),VCO.DomEvent.addListener(this._el.button_collapse_toggle,"click",this._onButtonCollapseMap,this),this._el.button_overview.innerHTML=this.options.map_as_image?VCO.Language.buttons.overview:VCO.Language.buttons.map_overview,VCO.Browser.mobile?(this._el.button_backtostart.innerHTML="<span class='vco-icon-goback'></span>",this._el.button_collapse_toggle.innerHTML="<span class='vco-icon-arrow-up'></span>",this._el.container.setAttribute("ontouchstart"," ")):(this._el.button_backtostart.innerHTML=VCO.Language.buttons.backtostart+" <span class='vco-icon-goback'></span>",this._el.button_collapse_toggle.innerHTML=VCO.Language.buttons.collapse_toggle+"<span class='vco-icon-arrow-up'></span>"),"landscape"==this.options.layout&&(this._el.button_collapse_toggle.style.display="none")},_initEvents:function(){},_updateDisplay:function(t,e,i){t&&(this.options.width=t),e&&(this.options.height=e)}}),VCO.Message=VCO.Class.extend({includes:[VCO.Events,VCO.DomMixins],_el:{},initialize:function(t,e,i){this._el={parent:{},container:{},message_container:{},loading_icon:{},message:{}},this.options={width:600,height:600,message_class:"vco-message",message_icon_class:"vco-loading-icon"},VCO.Util.mergeData(this.data,t),VCO.Util.mergeData(this.options,e),this._el.container=VCO.Dom.create("div",this.options.message_class),i&&(i.appendChild(this._el.container),this._el.parent=i),this.animator={},this._initLayout(),this._initEvents()},updateMessage:function(t){this._updateMessage(t)},updateDisplay:function(t,e){this._updateDisplay(t,e)},_updateMessage:function(t){this._el.message.innerHTML=t?t:VCO.Language?VCO.Language.messages.loading:"Loading"},_onMouseClick:function(){this.fire("clicked",this.options)},_initLayout:function(){this._el.message_container=VCO.Dom.create("div","vco-message-container",this._el.container),this._el.loading_icon=VCO.Dom.create("div",this.options.message_icon_class,this._el.message_container),this._el.message=VCO.Dom.create("div","vco-message-content",this._el.message_container),this._updateMessage()},_initEvents:function(){VCO.DomEvent.addListener(this._el.container,"click",this._onMouseClick,this)},_updateDisplay:function(t,e,i){}}),VCO.TimeNav=VCO.Class.extend({includes:[VCO.Events,VCO.DomMixins],_el:{},initialize:function(t,e,i){this._el={parent:{},container:{},button_overview:{},button_backtostart:{},button_collapse_toggle:{},arrow:{},line:{},coverbar:{},grip:{}},this.collapsed=!1,this._el.container="object"==typeof t?t:VCO.Dom.get(t),e&&(this._el.parent=e),this.options={width:600,height:600,duration:1e3,ease:VCO.Ease.easeInOutQuint,menubar_default_y:0},this.animator={},VCO.Util.mergeData(this.options,i),this._initLayout(),this._initEvents()},show:function(t){var e=this.options.duration;t&&(e=t)},hide:function(t){},updateDisplay:function(t,e,i,n){this._updateDisplay(t,e,i,n)
},_onButtonOverview:function(t){this.fire("overview",t)},_initLayout:function(){this._el.button_overview=VCO.Dom.create("span","vco-menubar-button",this._el.container),this._el.button_backtostart=VCO.Dom.create("span","vco-menubar-button",this._el.container),this._el.button_collapse_toggle=VCO.Dom.create("span","vco-menubar-button",this._el.container),this._el.button_overview.innerHTML=this.options.map_as_image?VCO.Language.buttons.overview:VCO.Language.buttons.map_overview,VCO.Browser.mobile?(this._el.button_backtostart.innerHTML="<span class='vco-icon-goback'></span>",this._el.button_collapse_toggle.innerHTML="<span class='vco-icon-arrow-up'></span>",this._el.container.setAttribute("ontouchstart"," ")):(this._el.button_backtostart.innerHTML=VCO.Language.buttons.backtostart+" <span class='vco-icon-goback'></span>",this._el.button_collapse_toggle.innerHTML=VCO.Language.buttons.collapse_toggle+"<span class='vco-icon-arrow-up'></span>"),"landscape"==this.options.layout&&(this._el.button_collapse_toggle.style.display="none")},_initEvents:function(){},_updateDisplay:function(t,e,i){t&&(this.options.width=t),e&&(this.options.height=e)}}),VCO.MediaType=function(t){for(var e={},i=[{type:"youtube",name:"YouTube",match_str:"(www.)?youtube|youtu.be",cls:VCO.Media.YouTube},{type:"vimeo",name:"Vimeo",match_str:"(player.)?vimeo.com",cls:VCO.Media.Vimeo},{type:"dailymotion",name:"DailyMotion",match_str:"(www.)?dailymotion.com",cls:VCO.Media.DailyMotion},{type:"vine",name:"Vine",match_str:"(www.)?vine.co",cls:VCO.Media.Vine},{type:"soundcloud",name:"SoundCloud",match_str:"(player.)?soundcloud.com",cls:VCO.Media.SoundCloud},{type:"twitter",name:"Twitter",match_str:"(www.)?twitter.com",cls:VCO.Media.Twitter},{type:"googlemaps",name:"Google Map",match_str:"maps.google",cls:VCO.Media.Map},{type:"googleplus",name:"Google+",match_str:"plus.google",cls:VCO.Media.GooglePlus},{type:"flickr",name:"Flickr",match_str:"flickr.com/photos",cls:VCO.Media.Flickr},{type:"instagram",name:"Instagram",match_str:/(instagr.am|instagram.com)\/p\//,cls:VCO.Media.Instagram},{type:"profile",name:"Profile",match_str:/((instagr.am|instagram.com)(\/profiles\/|[-a-zA-Z0-9@:%_\+.~#?&//=]+instagramprofile))|[-a-zA-Z0-9@:%_\+.~#?&//=]+\?profile/,cls:VCO.Media.Profile},{type:"image",name:"Image",match_str:/jpg|jpeg|png|gif/i,cls:VCO.Media.Image},{type:"googledocs",name:"Google Doc",match_str:/\b.(doc|docx|xls|xlsx|ppt|pptx|pdf|pages|ai|psd|tiff|dxf|svg|eps|ps|ttf|xps|zip|tif)\b/,cls:VCO.Media.GoogleDoc},{type:"wikipedia",name:"Wikipedia",match_str:"(www.)?wikipedia.org",cls:VCO.Media.Wikipedia},{type:"iframe",name:"iFrame",match_str:"iframe",cls:VCO.Media.IFrame},{type:"storify",name:"Storify",match_str:"storify",cls:VCO.Media.Storify},{type:"blockquote",name:"Quote",match_str:"blockquote",cls:VCO.Media.Blockquote},{type:"website",name:"Website",match_str:"http://",cls:VCO.Media.Website},{type:"",name:"",match_str:"",cls:VCO.Media}],n=0;n<i.length;n++){if(t instanceof Array)return e={type:"slider",cls:VCO.Media.Slider};if(t.url.match(i[n].match_str)){return e=i[n],e.url=t.url,e;break}}return!1},VCO.Media=VCO.Class.extend({includes:[VCO.Events],_el:{},initialize:function(t,e,i){this._el={container:{},content_container:{},content:{},content_item:{},caption:null,credit:null,parent:{},link:null},this.player=null,this.timer=null,this.load_timer=null,this.message=null,this.media_id=null,this._state={loaded:!1},this.data={uniqueid:null,url:null,credit:null,caption:null,link:null,link_target:null},this.options={api_key_flickr:"f2cc870b4d233dd0a5bfe73fd0d64ef0",credit_height:0,caption_height:0},this.animator={},VCO.Util.mergeData(this.options,e),VCO.Util.mergeData(this.data,t),this._el.container=VCO.Dom.create("div","vco-media"),this._el.container.id=this.data.uniqueid,this._initLayout(),i&&(i.appendChild(this._el.container),this._el.parent=i)},loadMedia:function(){var t=this;if(!this._state.loaded)try{this.load_timer=setTimeout(function(){t._loadMedia(),t._state.loaded=!0,t._updateDisplay()},1200)}catch(e){trace("Error loading media for ",this._media),trace(e)}},updateMediaDisplay:function(t){this._state.loaded&&(this._updateMediaDisplay(t),VCO.Browser.mobile||(this._el.content_item.style.maxHeight=this.options.height/2+"px"),VCO.Browser.firefox&&this._el.content_item.offsetWidth>this._el.content_item.offsetHeight&&(this._el.content_item.style.width="100%"))},_loadMedia:function(){},_updateMediaDisplay:function(t){},show:function(){},hide:function(){},addTo:function(t){t.appendChild(this._el.container),this.onAdd()},removeFrom:function(t){t.removeChild(this._el.container),this.onRemove()},updateDisplay:function(t,e,i){this._updateDisplay(t,e,i)},stopMedia:function(){this._stopMedia()},loadErrorDisplay:function(t){this._el.content.removeChild(this._el.content_item),this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-loaderror",this._el.content),this._el.content_item.innerHTML=t+"<br/><span class='vco-icon-"+this.options.media_type+"'></span>",this.message&&this.message.hide()},onLoaded:function(){this._state.loaded=!0,this.fire("loaded",this.data),this.message&&this.message.hide(),this.showMeta(),this.updateDisplay()},showMeta:function(){this.data.credit&&""!=this.data.credit&&(this._el.credit=VCO.Dom.create("div","vco-credit",this._el.content_container),this._el.credit.innerHTML=this.data.credit,this.options.credit_height=this._el.credit.offsetHeight),this.data.caption&&""!=this.data.caption&&(this._el.caption=VCO.Dom.create("div","vco-caption",this._el.content_container),this._el.caption.innerHTML=this.data.caption,this.options.caption_height=this._el.caption.offsetHeight)},onAdd:function(){this.fire("added",this.data)},onRemove:function(){this.fire("removed",this.data)},_initLayout:function(){this.message=new VCO.Message({},this.options),this.message.addTo(this._el.container),this._el.content_container=VCO.Dom.create("div","vco-media-content-container",this._el.container),this.data.link&&""!=this.data.link?(this._el.link=VCO.Dom.create("a","vco-media-link",this._el.content_container),this._el.link.href=this.data.link,this._el.link.target=this.data.link_target&&""!=this.data.link_target?this.data.link_target:"_blank",this._el.content=VCO.Dom.create("div","vco-media-content",this._el.link)):this._el.content=VCO.Dom.create("div","vco-media-content",this._el.content_container)},_updateDisplay:function(t,e,i){t&&(this.options.width=t),e&&(this.options.height=e),i&&(this.options.layout=i),this._el.credit&&(this.options.credit_height=this._el.credit.offsetHeight),this._el.caption&&(this.options.caption_height=this._el.caption.offsetHeight+5),this.updateMediaDisplay(this.options.layout)},_stopMedia:function(){}}),VCO.Media.Blockquote=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){this.message.updateMessage(VCO.Language.messages.loading+" "+this.options.media_name),this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-blockquote",this._el.content),this.media_id=this.data.url,this._el.content_item.innerHTML=this.media_id,this.onLoaded()},updateMediaDisplay:function(){},_updateMediaDisplay:function(){}}),VCO.Media.Flickr=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var t,e=this;this.message.updateMessage(VCO.Language.messages.loading+" "+this.options.media_name),this._el.content_item=VCO.Dom.create("img","vco-media-item vco-media-image vco-media-flickr vco-media-shadow",this._el.content),this.establishMediaID(),t="http://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?",VCO.getJSON(t,function(t){"ok"==t.stat?e.createMedia(t):e.loadErrorDisplay("Photo not found or private.")})},establishMediaID:function(){var t="flickr.com/photos/",e=this.data.url.indexOf(t);if(-1==e)throw"Invalid Flickr URL";var i=e+t.length;this.media_id=this.data.url.substr(i).split("/")[1]},createMedia:function(t){for(var e=this.sizes(this.options.height),i=t.sizes.size[t.sizes.size.length-2].source,n=0;n<t.sizes.size.length;n++)t.sizes.size[n].label==e&&(i=t.sizes.size[n].source);this._el.content_item.src=i,this.onLoaded()},sizes:function(t){var e="";return e=75>=t?0>=t?"Large":"Thumbnail":180>=t?"Small":240>=t?"Small 320":375>=t?"Medium":480>=t?"Medium 640":600>=t?"Large":"Large"}}),VCO.Media.Instagram=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var t,e=this;this.message.updateMessage(VCO.Language.messages.loading+" "+this.options.media_name),this.media_id=this.data.url.split("/p/")[1].split("/")[0],this._el.content_item=VCO.Dom.create("img","vco-media-item vco-media-image vco-media-instagram vco-media-shadow",this._el.content),this._el.content_item.src="http://instagr.am/p/"+this.media_id+"/media/?size="+this.sizes(this._el.content.offsetWidth),this.onLoaded()},sizes:function(t){var e="";return e=150>=t?"t":306>=t?"m":"l"}}),VCO.Media.Profile=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){this.message.updateMessage(VCO.Language.messages.loading+" "+this.options.media_name),this._el.content_item=VCO.Dom.create("img","vco-media-item vco-media-image vco-media-profile vco-media-shadow",this._el.content),this._el.content_item.src=this.data.url,this.onLoaded()},_updateMediaDisplay:function(t){VCO.Browser.firefox&&(this._el.content_item.style.maxWidth=this.options.width/2-40+"px")}}),VCO.Media.GoogleDoc=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var t,e=this;this.message.updateMessage(VCO.Language.messages.loading+" "+this.options.media_name),this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-iframe",this._el.content),this.media_id=this.data.url,t=this.media_id,this._el.content_item.innerHTML=this.media_id.match(/docs.google.com/i)?"<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+this.media_id+"&amp;embedded=true'></iframe>":"<iframe class='doc' frameborder='0' width='100%' height='100%' src='http://docs.google.com/viewer?url="+this.media_id+"&amp;embedded=true'></iframe>",this.onLoaded()},_updateMediaDisplay:function(){this._el.content_item.style.height=this.options.height+"px"}}),VCO.Media.GooglePlus=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var t,e=this;this.message.updateMessage(VCO.Language.messages.loading+" "+this.options.media_name),this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-googleplus",this._el.content),this.media_id=this.data.url,t=this.media_id,this._el.content_item.innerHTML="<iframe frameborder='0' width='100%' height='100%' src='"+t+"'></iframe>",this.onLoaded()},_updateMediaDisplay:function(){this._el.content_item.style.height=this.options.height+"px"}}),VCO.Media.IFrame=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var t,e=this;this.message.updateMessage(VCO.Language.messages.loading+" "+this.options.media_name),this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-iframe",this._el.content),this.media_id=this.data.url,t=this.media_id,this._el.content_item.innerHTML=t,this.onLoaded()},_updateMediaDisplay:function(){this._el.content_item.style.height=this.options.height+"px"}}),VCO.Media.Image=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){this.message.updateMessage(VCO.Language.messages.loading+" "+this.options.media_name),this._el.content_item=VCO.Dom.create("img","vco-media-item vco-media-image vco-media-shadow",this._el.content),this._el.content_item.src=this.data.url,this.onLoaded()},_updateMediaDisplay:function(t){VCO.Browser.firefox&&(this._el.content_item.style.maxWidth=this.options.width/2-40+"px")}}),VCO.Media.SoundCloud=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var t,e=this;this.message.updateMessage(VCO.Language.messages.loading+" "+this.options.media_name),this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-iframe vco-media-soundcloud vco-media-shadow",this._el.content),this.media_id=this.data.url,t="http://soundcloud.com/oembed?url="+this.media_id+"&format=js&callback=?",VCO.getJSON(t,function(t){e.createMedia(t)})},createMedia:function(t){this._el.content_item.innerHTML=t.html,this.onLoaded()}}),VCO.Media.Storify=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var t;this.message.updateMessage(VCO.Language.messages.loading+" "+this.options.media_name),this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-iframe vco-media-storify",this._el.content),this.media_id=this.data.url,t="<iframe frameborder='0' width='100%' height='100%' src='"+this.media_id+"/embed'></iframe>",t+="<script src='"+this.media_id+".js'></script>",this._el.content_item.innerHTML=t,this.onLoaded()},_updateMediaDisplay:function(){this._el.content_item.style.height=this.options.height+"px"}}),VCO.Media.Text=VCO.Class.extend({includes:[VCO.Events],_el:{container:{},content_container:{},content:{},headline:{}},data:{uniqueid:"",headline:"headline",text:"text"},options:{title:!1},initialize:function(t,e,i){VCO.Util.setData(this,t),VCO.Util.mergeData(this.options,e),this._el.container=VCO.Dom.create("div","vco-text"),this._el.container.id=this.data.uniqueid,this._initLayout(),i&&i.appendChild(this._el.container)},show:function(){},hide:function(){},addTo:function(t){t.appendChild(this._el.container)},removeFrom:function(t){t.removeChild(this._el.container)},headlineHeight:function(){return this._el.headline.offsetHeight+40},onLoaded:function(){this.fire("loaded",this.data)},onAdd:function(){this.fire("added",this.data)},onRemove:function(){this.fire("removed",this.data)},_initLayout:function(){if(this._el.content_container=VCO.Dom.create("div","vco-text-content-container",this._el.container),""!=this.data.headline){var t="vco-headline";this.options.title&&(t="vco-headline vco-headline-title"),this._el.headline=VCO.Dom.create("h2",t,this._el.content_container),this._el.headline.innerHTML=this.data.headline}if(""!=this.data.text){var e="";e+=VCO.Util.htmlify(this.data.text),this.data.date&&this.data.date.created_time&&""!=this.data.date.created_time&&this.data.date.created_time.length>10&&(e+="undefined"!=typeof moment?"<div class='vco-text-date'>"+moment(this.data.date.created_time,"YYYY-MM-DD h:mm:ss").fromNow()+"</div>":"<div class='vco-text-date'>"+VCO.Util.convertUnixTime(this.data.date.created_time)+"</div>"),this._el.content=VCO.Dom.create("div","vco-text-content",this._el.content_container),this._el.content.innerHTML=e}this.onLoaded()}}),VCO.Media.Twitter=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var t,e=this;this.message.updateMessage(VCO.Language.messages.loading+" "+this.options.media_name),this._el.content_item=VCO.Dom.create("div","vco-media-twitter",this._el.content),this.media_id=this.data.url.match("status/")?this.data.url.split("status/")[1]:url.match("statuses/")?this.data.url.split("statuses/")[1]:"",t="https://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?",VCO.getJSON(t,function(t){e.createMedia(t)})},createMedia:function(t){var e="",i="",n="",s="",a="",o="";i=t.html.split("</p>&mdash;")[0]+"</p></blockquote>",n=t.author_url.split("twitter.com/")[1],s=t.html.split("</p>&mdash;")[1].split('<a href="')[1],a=s.split('">')[0],o=s.split('">')[1].split("</a>")[0],e+=i,e+="<div class='vcard'>",e+="<a href='"+a+"' class='twitter-date' target='_blank'>"+o+"</a>",e+="<div class='author'>",e+="<a class='screen-name url' href='"+t.author_url+"' target='_blank'>",e+="<span class='avatar'></span>",e+="<span class='fn'>"+t.author_name+" <span class='vco-icon-twitter'></span></span>",e+="<span class='nickname'>@"+n+"<span class='thumbnail-inline'></span></span>",e+="</a>",e+="</div>",e+="</div>",this._el.content_item.innerHTML=e,this.onLoaded()},updateMediaDisplay:function(){},_updateMediaDisplay:function(){}}),VCO.Media.Vimeo=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var t,e=this;this.message.updateMessage(VCO.Language.messages.loading+" "+this.options.media_name),this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-iframe vco-media-vimeo vco-media-shadow",this._el.content),this.media_id=this.data.url.split(/video\/|\/\/vimeo\.com\//)[1].split(/[?&]/)[0],t="http://player.vimeo.com/video/"+this.media_id+"?api=1&title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff",this.player=VCO.Dom.create("iframe","",this._el.content_item),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=t,this.onLoaded()},_updateMediaDisplay:function(){this._el.content_item.style.height=VCO.Util.ratio.r16_9({w:this._el.content_item.offsetWidth})+"px"},_stopMedia:function(){try{this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"http://player.vimeo.com")}catch(t){trace(t)}}}),VCO.Media.DailyMotion=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var t,e=this;this.message.updateMessage(VCO.Language.messages.loading+" "+this.options.media_name),this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-iframe vco-media-dailymotion",this._el.content),this.media_id=this.data.url.match("video")?this.data.url.split("video/")[1].split(/[?&]/)[0]:this.data.url.split("embed/")[1].split(/[?&]/)[0],t="http://www.dailymotion.com/embed/video/"+this.media_id,this._el.content_item.innerHTML="<iframe autostart='false' frameborder='0' width='100%' height='100%' src='"+t+"'></iframe>",this.onLoaded()},_updateMediaDisplay:function(){this._el.content_item.style.height=VCO.Util.ratio.r16_9({w:this._el.content_item.offsetWidth})+"px"}}),VCO.Media.Vine=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var t,e=this;this.message.updateMessage(VCO.Language.messages.loading+" "+this.options.media_name),this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-iframe vco-media-vine vco-media-shadow",this._el.content),this.media_id=this.data.url.split("vine.co/v/")[1],t="https://vine.co/v/"+this.media_id+"/embed/simple",this._el.content_item.innerHTML="<iframe frameborder='0' width='100%' height='100%' src='"+t+"'></iframe><script async src='http://platform.vine.co/static/scripts/embed.js' charset='utf-8'></script>",this.onLoaded()},_updateMediaDisplay:function(){var t=VCO.Util.ratio.square({w:this._el.content_item.offsetWidth,h:this.options.height});this._el.content_item.style.height=t.h+"px"}}),VCO.Media.Website=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){},createMedia:function(t){this.onLoaded()}}),VCO.Media.Wikipedia=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var t,e,i=this;this.message.updateMessage(VCO.Language.messages.loading+" "+this.options.media_name),this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-wikipedia",this._el.content),this.media_id=this.data.url.split("wiki/")[1].split("#")[0].replace("_"," "),this.media_id=this.media_id.replace(" ","%20"),e=this.data.url.split("//")[1].split(".wikipedia")[0],t="http://"+e+".wikipedia.org/w/api.php?action=query&prop=extracts&redirects=&titles="+this.media_id+"&exintro=1&format=json&callback=?",VCO.getJSON(t,function(t){i.createMedia(t)})},createMedia:function(t){var e="";if(t.query){var i,e={entry:{},title:"",text:"",extract:"",paragraphs:1,text_array:[]};e.entry=VCO.Util.getObjectAttributeByIndex(t.query.pages,0),e.extract=e.entry.extract,e.title=e.entry.title,e.extract.match("<p>")?e.text_array=e.extract.split("<p>"):e.text_array.push(e.extract);for(var n=0;n<e.text_array.length;n++)n+1<=e.paragraphs&&n+1<e.text_array.length&&(e.text+="<p>"+e.text_array[n+1]);i="<h4><a href='"+this.data.url+"' target='_blank'>"+e.title+"</a></h4>",i+="<span class='wiki-source'>"+VCO.Language.messages.wikipedia+"</span>",i+=e.text,e.extract.match("REDIRECT")||(this._el.content_item.innerHTML=i,this.onLoaded())}},updateMediaDisplay:function(){},_updateMediaDisplay:function(){}}),VCO.Media.YouTube=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var t=this,e;this.message.updateMessage(VCO.Language.messages.loading+" "+this.options.media_name),this.youtube_loaded=!1,this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-youtube vco-media-shadow",this._el.content),this._el.content_item.id=VCO.Util.unique_ID(7),e=VCO.Util.getUrlVars(this.data.url),this.media_id={},this.data.url.match("v=")?this.media_id.id=e.v:this.data.url.match("/embed/")?this.media_id.id=this.data.url.split("embed/")[1].split(/[?&]/)[0]:this.data.url.match(/v\/|v=|youtu\.be\//)?this.media_id.id=this.data.url.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0]:trace("YOUTUBE IN URL BUT NOT A VALID VIDEO"),this.media_id.start=e.t,this.media_id.hd=e.hd,VCO.Load.js("https://www.youtube.com/player_api",function(){t.createMedia()})},_updateMediaDisplay:function(){this._el.content_item.style.height=VCO.Util.ratio.r16_9({w:this._el.content_item.offsetWidth})+"px"},_stopMedia:function(){if(this.youtube_loaded)try{this.player.pauseVideo()}catch(t){trace(t)}},createMedia:function(){var t=this;if("undefined"!=typeof this.media_id.start){var e=this.media_id.start.toString(),i=0,n=0;e.match("m")?(i=parseInt(e.split("m")[0],10),n=parseInt(e.split("m")[1].split("s")[0],10),this.media_id.start=60*i+n):this.media_id.start=0}else this.media_id.start=0;this.media_id.hd="undefined"!=typeof this.media_id.hd?!0:!1,this.createPlayer()},createPlayer:function(){var t=this;clearTimeout(this.timer),"undefined"!=typeof YT&&"undefined"!=typeof YT.Player?this.player=new YT.Player(this._el.content_item.id,{playerVars:{enablejsapi:1,color:"white",showinfo:0,theme:"light",start:this.media_id.start,rel:0},videoId:this.media_id.id,events:{onReady:function(){t.onPlayerReady(),t.onLoaded()},onStateChange:t.onStateChange}}):this.timer=setTimeout(function(){t.createPlayer()},1e3)},onPlayerReady:function(t){this.youtube_loaded=!0},onStateChange:function(t){}}),VCO.Media.Slider=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){this._el.content_item=VCO.Dom.create("img","vco-media-item vco-media-image",this._el.content),this._el.content_item.src=this.data.url,this.onLoaded()}}),VCO.Slide=VCO.Class.extend({includes:[VCO.Events,VCO.DomMixins],_el:{},initialize:function(t,e,i){this._el={container:{},scroll_container:{},background:{},content_container:{},content:{}},this._media=null,this._mediaclass={},this._text={},this._state={loaded:!1},this.has={headline:!1,text:!1,media:!1,title:!1,background:{image:!1,color:!1,color_value:"#FFF"}},this.has.title=i,this.data={uniqueid:null,background:null,date:null,location:null,text:null,media:null},this.options={duration:1e3,slide_padding_lr:40,ease:VCO.Ease.easeInSpline,width:600,height:600,skinny_size:650,media_name:""},this.active=!1,this.animator={},VCO.Util.mergeData(this.options,e),VCO.Util.mergeData(this.data,t),this._initLayout(),this._initEvents()},show:function(){trace("show"),this.animator=VCO.Animate(this._el.slider_container,{left:-(this._el.container.offsetWidth*n)+"px",duration:this.options.duration,easing:this.options.ease})},hide:function(){},setActive:function(t){this.active=t,this.active?(this.data.background&&this.fire("background_change",this.has.background),this.loadMedia()):this.stopMedia()},addTo:function(t){t.appendChild(this._el.container)},removeFrom:function(t){t.removeChild(this._el.container)},updateDisplay:function(t,e,i){this._updateDisplay(t,e,i)},loadMedia:function(){this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0)},stopMedia:function(){this._media&&this._state.loaded&&this._media.stopMedia()},getBackground:function(){return this.has.background},scrollToTop:function(){this._el.container.scrollTop=0},_initLayout:function(){this._el.container=VCO.Dom.create("div","vco-slide"),this.data.uniqueid&&(this._el.container.id=this.data.uniqueid),this._el.scroll_container=VCO.Dom.create("div","vco-slide-scrollable-container",this._el.container),this._el.content_container=VCO.Dom.create("div","vco-slide-content-container",this._el.scroll_container),this._el.content=VCO.Dom.create("div","vco-slide-content",this._el.content_container),this._el.background=VCO.Dom.create("div","vco-slide-background",this._el.container),this.data.background&&(this.data.background.url&&(this.has.background.image=!0,this._el.container.className+=" vco-full-image-background",this.has.background.color_value="#000",this._el.background.style.backgroundImage="url('"+this.data.background.url+"')",this._el.background.style.display="block"),this.data.background.color&&(this.has.background.color=!0,this._el.container.className+=" vco-full-color-background",this.has.background.color_value=this.data.background.color),this.data.background.text_background&&(this._el.container.className+=" vco-text-background")),this.data.media&&this.data.media.url&&""!=this.data.media.url&&(this.has.media=!0),this.data.text&&this.data.text.text&&(this.has.text=!0),this.data.text&&this.data.text.headline&&(this.has.headline=!0),this.has.media&&(this.data.media.mediatype=VCO.MediaType(this.data.media),this.options.media_name=this.data.media.mediatype.name,this.options.media_type=this.data.media.mediatype.type,this._media=new this.data.media.mediatype.cls(this.data.media,this.options)),(this.has.text||this.has.headline)&&(this._text=new VCO.Media.Text(this.data.text,{title:this.has.title})),this.has.text||this.has.headline||!this.has.media?this.has.headline&&this.has.media&&!this.has.text?(this._el.container.className+=" vco-slide-media-only",this._text.addTo(this._el.content),this._media.addTo(this._el.content)):this.has.text&&this.has.media?(this._media.addTo(this._el.content),this._text.addTo(this._el.content)):(this.has.text||this.has.headline)&&(this._el.container.className+=" vco-slide-text-only",this._text.addTo(this._el.content)):(this._el.container.className+=" vco-slide-media-only",this._media.addTo(this._el.content)),this.onLoaded()},_initEvents:function(){},_updateDisplay:function(t,e,i){this.options.width=t?t:this._el.container.offsetWidth,VCO.Browser.mobile&&this.options.width<=this.options.skinny_size?(this._el.content.style.paddingLeft="0px",this._el.content.style.paddingRight="0px",this._el.content.style.width=this.options.width-0+"px"):"landscape"==i?(this._el.content.style.paddingLeft="40px",this._el.content.style.paddingRight="75px",this._el.content.style.width=this.options.width-115+"px"):this.options.width<=this.options.skinny_size?(this._el.content.style.paddingLeft=this.options.slide_padding_lr+"px",this._el.content.style.paddingRight=this.options.slide_padding_lr+"px",this._el.content.style.width=this.options.width-2*this.options.slide_padding_lr+"px"):(this._el.content.style.paddingLeft=this.options.slide_padding_lr+"px",this._el.content.style.paddingRight=this.options.slide_padding_lr+"px",this._el.content.style.width=this.options.width-2*this.options.slide_padding_lr+"px"),this.options.height=e?e:this._el.container.offsetHeight,this._media&&(!this.has.text&&this.has.headline?this._media.updateDisplay(this.options.width,this.options.height-this._text.headlineHeight(),i):this._media.updateDisplay(this.options.width,this.options.height,i))}}),VCO.SlideNav=VCO.Class.extend({includes:[VCO.Events,VCO.DomMixins],_el:{},initialize:function(t,e,i){this._el={container:{},content_container:{},icon:{},title:{},description:{}},this.mediatype={},this.data={title:"Navigation",description:"Description"},this.options={direction:"previous"},this.animator=null,VCO.Util.mergeData(this.options,e),VCO.Util.mergeData(this.data,t),this._el.container=VCO.Dom.create("div","vco-slidenav-"+this.options.direction),VCO.Browser.mobile&&this._el.container.setAttribute("ontouchstart"," "),this._initLayout(),this._initEvents(),i&&i.appendChild(this._el.container)},update:function(t){this._update(t)},setColor:function(t){this._el.content_container.className=t?"vco-slidenav-content-container vco-slidenav-inverted":"vco-slidenav-content-container"},_onMouseClick:function(){this.fire("clicked",this.options)},_update:function(t){this.data=VCO.Util.mergeData(this.data,t),""!=this.data.title&&(this._el.title.innerHTML=this.data.title),""!=this.data.date&&(this._el.description.innerHTML=this.data.description)},_initLayout:function(){this._el.content_container=VCO.Dom.create("div","vco-slidenav-content-container",this._el.container),this._el.icon=VCO.Dom.create("div","vco-slidenav-icon",this._el.content_container),this._el.title=VCO.Dom.create("div","vco-slidenav-title",this._el.content_container),this._el.description=VCO.Dom.create("div","vco-slidenav-description",this._el.content_container),this._el.icon.innerHTML="&nbsp;",this._update()},_initEvents:function(){VCO.DomEvent.addListener(this._el.container,"click",this._onMouseClick,this)}}),VCO.StorySlider=VCO.Class.extend({includes:VCO.Events,initialize:function(t,e,i,n){this._el={container:{},background:{},slider_container_mask:{},slider_container:{},slider_item_container:{}},this._nav={},this._nav.previous={},this._nav.next={},this.slide_spacing=0,this._slides=[],this._swipable,this.preloadTimer,this._message,this.current_slide=0,this.data={uniqueid:"",slides:[{uniqueid:"",background:{url:null,color:null,opacity:50},date:null,location:{lat:-9.143962,lon:38.731094,zoom:13,icon:"http://maps.gstatic.com/intl/en_us/mapfiles/ms/micons/blue-pushpin.png"},text:{headline:"Slideshow Example",text:"Example slideshow slide "},media:[{uniqueid:"",text:{headline:"Slideshow Example",text:""},media:{url:"http://2.bp.blogspot.com/-dxJbW0CG8Zs/TmkoMA5-cPI/AAAAAAAAAqw/fQpsz9GpFdo/s1600/voyage-dans-la-lune-1902-02-g.jpg",credit:"",caption:"",link:null,link_target:null}},{uniqueid:"",text:{headline:"Slideshow Example",text:""},media:{url:"http://2.bp.blogspot.com/-dxJbW0CG8Zs/TmkoMA5-cPI/AAAAAAAAAqw/fQpsz9GpFdo/s1600/voyage-dans-la-lune-1902-02-g.jpg",credit:"",caption:"",link:null,link_target:null}},{uniqueid:"",text:{headline:"Slideshow Example",text:""},media:{url:"http://2.bp.blogspot.com/-dxJbW0CG8Zs/TmkoMA5-cPI/AAAAAAAAAqw/fQpsz9GpFdo/s1600/voyage-dans-la-lune-1902-02-g.jpg",credit:"",caption:"",link:null,link_target:null}},{uniqueid:"",text:{headline:"Slideshow Example",text:""},media:{url:"http://2.bp.blogspot.com/-dxJbW0CG8Zs/TmkoMA5-cPI/AAAAAAAAAqw/fQpsz9GpFdo/s1600/voyage-dans-la-lune-1902-02-g.jpg",credit:"",caption:"",link:null,link_target:null}}]},{uniqueid:"",background:{url:null,color:null,opacity:50},date:null,location:{lat:-9.143962,lon:38.731094,zoom:13,icon:"http://maps.gstatic.com/intl/en_us/mapfiles/ms/micons/blue-pushpin.png"},text:{headline:"YouTube",text:"Just add a link to the video in the media field."},media:{url:"http://www.youtube.com/watch?v=lIvftGgps24",credit:"",caption:"",link:null,link_target:null}}]},this.options={id:"",layout:"portrait",width:600,height:600,slide_padding_lr:40,start_at_slide:1,slide_default_fade:"0%",duration:1e3,ease:VCO.Ease.easeInOutQuint,dragging:!0,trackResize:!0},"object"==typeof t?(this._el.container=t,this.options.id=VCO.Util.unique_ID(6,"vco")):(this.options.id=t,this._el.container=VCO.Dom.get(t)),this._el.container.id||(this._el.container.id=this.options.id),this.animator=null,VCO.Util.mergeData(this.options,i),VCO.Util.mergeData(this.data,e),n&&this.init()},init:function(){this._initLayout(),this._initEvents(),this._initData(),this._updateDisplay(),this.goTo(this.options.start_at_slide),this._onLoaded()},updateDisplay:function(t,e,i,n){this._updateDisplay(t,e,i,n)},createSlide:function(t){this._createSlide(t)},createSlides:function(t){this._createSlides(t)},_createSlides:function(t){for(var e=0;e<t.length;e++)""==t[e].uniqueid&&(t[e].uniqueid=VCO.Util.unique_ID(6,"vco-slide")),0==e?this._createSlide(t[e],!0):this._createSlide(t[e],!1)},_createSlide:function(t,e){var i=new VCO.Slide(t,this.options,e);this._addSlide(i),this._slides.push(i)},_destroySlide:function(t){this._removeSlide(t);for(var e=0;e<this._slides.length;e++)this._slides[e]==t&&this._slides.splice(e,1)},_addSlide:function(t){t.addTo(this._el.slider_item_container),t.on("added",this._onSlideAdded,this),t.on("background_change",this._onBackgroundChange,this)},_removeSlide:function(t){t.removeFrom(this._el.slider_item_container),t.off("added",this._onSlideAdded,this),t.off("background_change",this._onBackgroundChange)
},goTo:function(t,e,i){var n=this;this.changeBackground({color_value:"#FFF",image:!1}),this.preloadTimer&&clearTimeout(this.preloadTimer);for(var s=0;s<this._slides.length;s++)this._slides[s].setActive(!1);t<this._slides.length&&t>=0&&(this.current_slide=t,this.animator&&this.animator.stop(),this._swipable&&this._swipable.stopMomentum(),e?(this._el.slider_container.style.left=-(this.slide_spacing*t)+"px",this._onSlideChange(i)):this.animator=VCO.Animate(this._el.slider_container,{left:-(this.slide_spacing*t)+"px",duration:this.options.duration,easing:this.options.ease,complete:this._onSlideChange(i)}),this._slides[this.current_slide].setActive(!0),this._slides[this.current_slide+1]?(this.showNav(this._nav.next,!0),this._nav.next.update(this.getNavInfo(this._slides[this.current_slide+1]))):this.showNav(this._nav.next,!1),this._slides[this.current_slide-1]?(this.showNav(this._nav.previous,!0),this._nav.previous.update(this.getNavInfo(this._slides[this.current_slide-1]))):this.showNav(this._nav.previous,!1),this.preloadTimer=setTimeout(function(){n.preloadSlides()},this.options.duration))},preloadSlides:function(){this._slides[this.current_slide+1]&&(this._slides[this.current_slide+1].loadMedia(),this._slides[this.current_slide+1].scrollToTop()),this._slides[this.current_slide+2]&&(this._slides[this.current_slide+2].loadMedia(),this._slides[this.current_slide+2].scrollToTop()),this._slides[this.current_slide-1]&&(this._slides[this.current_slide-1].loadMedia(),this._slides[this.current_slide-1].scrollToTop()),this._slides[this.current_slide-2]&&(this._slides[this.current_slide-2].loadMedia(),this._slides[this.current_slide-2].scrollToTop())},getNavInfo:function(t){var e={title:"",description:""};return t.data.text&&t.data.text.headline&&(e.title=t.data.text.headline),e},next:function(){this.goTo(this.current_slide+1<this._slides.length?this.current_slide+1:this.current_slide)},previous:function(){this.goTo(this.current_slide-1>=0?this.current_slide-1:this.current_slide)},showNav:function(t,e){this.options.width<=500&&VCO.Browser.mobile||(e?t.show():t.hide())},changeBackground:function(t){var e={r:256,g:256,b:256},i,n=this.options.slide_default_fade,s="15%",a="0.87",o="";t.color_value&&(e=VCO.Util.hexToRgb(t.color_value)),i=e.r+","+e.g+","+e.b,this._el.background.style.backgroundImage="none","landscape"==this.options.layout?(this._nav.next.setColor(!1),this._nav.previous.setColor(!1),e.r<255&&e.g<255&&e.b<255&&(n="0%"),t.image,o+="background-image: -webkit-linear-gradient(left, color-stop(rgba("+i+",0.0001 ) "+n+"), color-stop(rgba("+i+","+a+") "+s+"));",o+="background-image: linear-gradient(to right, rgba("+i+",0.0001 ) "+n+", rgba("+i+","+a+") "+s+");",o+="background-repeat: repeat-x;",o+="filter: e(%('progid:DXImageTransform.Microsoft.gradient(startColorstr='%d', endColorstr='%d', GradientType=1)',argb("+i+", 0.0001),argb("+i+",0.80)));",this._el.background.setAttribute("style",o)):(this._el.background.style.backgroundColor=t.color_value?t.color_value:"#FFF",e.r<255&&e.g<255&&e.b<255||t.image?(this._nav.next.setColor(!0),this._nav.previous.setColor(!0)):(this._nav.next.setColor(!1),this._nav.previous.setColor(!1)))},_updateDisplay:function(t,e,i,n){var s,a;a="undefined"==typeof n?this.options.layout:n,this.options.layout=a,this.slide_spacing=2*this.options.width,this.options.width=t?t:this._el.container.offsetWidth,this.options.height=e?e:this._el.container.offsetHeight,s=this.options.height/2,this._nav.next.setPosition({top:s}),this._nav.previous.setPosition({top:s});for(var o=0;o<this._slides.length;o++)this._slides[o].updateDisplay(this.options.width,this.options.height,a),this._slides[o].setPosition({left:this.slide_spacing*o,top:0});this.goTo(this.current_slide,!0,!0)},_initLayout:function(){this._el.container.className+=" vco-storyslider",this._el.slider_container_mask=VCO.Dom.create("div","vco-slider-container-mask",this._el.container),this._el.background=VCO.Dom.create("div","vco-slider-background",this._el.container),this._el.slider_container=VCO.Dom.create("div","vco-slider-container vcoanimate",this._el.slider_container_mask),this._el.slider_item_container=VCO.Dom.create("div","vco-slider-item-container",this._el.slider_container),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this._nav.previous=new VCO.SlideNav({title:"Previous",description:"description"},{direction:"previous"}),this._nav.next=new VCO.SlideNav({title:"Next",description:"description"},{direction:"next"}),this._nav.next.addTo(this._el.container),this._nav.previous.addTo(this._el.container),this._el.slider_container.style.left="0px",VCO.Browser.touch&&(this._swipable=new VCO.Swipable(this._el.slider_container_mask,this._el.slider_container,{enable:{x:!0,y:!1},snap:!0}),this._swipable.enable(),this._message=new VCO.Message({},{message_class:"vco-message-full",message_icon_class:"vco-icon-swipe-left"}),this._message.updateMessage("Swipe to Navigate<br><span class='vco-button'>OK</span>"),this._message.addTo(this._el.container))},_initEvents:function(){this._nav.next.on("clicked",this._onNavigation,this),this._nav.previous.on("clicked",this._onNavigation,this),this._message&&this._message.on("clicked",this._onMessageClick,this),this._swipable&&(this._swipable.on("swipe_left",this._onNavigation,this),this._swipable.on("swipe_right",this._onNavigation,this),this._swipable.on("swipe_nodirection",this._onSwipeNoDirection,this))},_initData:function(){this._createSlides(this.data.slides)},_onBackgroundChange:function(t){var e;e=this._slides[this.current_slide].getBackground(),this.changeBackground(t),this.fire("colorchange",e)},_onMessageClick:function(t){this._message.hide()},_onSwipeNoDirection:function(t){this.goTo(this.current_slide)},_onNavigation:function(t){"next"==t.direction||"left"==t.direction?this.next():("previous"==t.direction||"right"==t.direction)&&this.previous(),this.fire("nav_"+t.direction,this.data)},_onSlideAdded:function(t){trace("slideadded"),this.fire("slideAdded",this.data)},_onSlideRemoved:function(t){this.fire("slideAdded",this.data)},_onSlideChange:function(t){t||this.fire("change",{current_slide:this.current_slide})},_onMouseClick:function(t){},_fireMouseEvent:function(t){if(this._loaded){var e=t.type;e="mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,this.hasEventListeners(e)&&("contextmenu"===e&&VCO.DomEvent.preventDefault(t),this.fire(e,{latlng:"something",layerPoint:"something else"}))}},_onLoaded:function(){this.fire("loaded",this.data)}}),VCO.Timeline=VCO.Class.extend({includes:VCO.Events,initialize:function(t,e,i){var n=this;return this.version="0.1.16",this.ready=!1,this._el={container:{},storyslider:{},map:{},menubar:{}},this._el.container="object"==typeof t?t:VCO.Dom.get(t),this._storyslider={},this._map={},this.map={},this._menubar={},this._loaded={storyslider:!1,map:!1},this.data={uniqueid:"",slides:[{uniqueid:"",type:"overview",background:{url:"http://upload.wikimedia.org/wikipedia/commons/thumb/2/2d/Mark_Twain_by_Abdullah_Fr%C3%A8res%2C_1867.jpg/418px-Mark_Twain_by_Abdullah_Fr%C3%A8res%2C_1867.jpg",color:"",opacity:50},date:"1835",text:{headline:"Mark Twain",text:'Samuel Langhorne Clemens (November 30, 1835  April 21, 1910), better known by his pen name Mark Twain, was an American author and humorist. He wrote The Adventures of Tom Sawyer (1876) and its sequel, Adventures of Huckleberry Finn (1885), the latter often called "the Great American Novel."'},media:null},{uniqueid:"",date:"1835",location:{lat:39.491711,lon:-91.79326,name:"Florida, Missouri",zoom:12,icon:"http://maps.gstatic.com/intl/en_us/mapfiles/ms/micons/blue-pushpin.png",line:!0},text:{headline:"Florida, Missouri",text:"Born in Florida, Missouri. Halleys comet visible from earth."},media:{url:"http://upload.wikimedia.org/wikipedia/commons/thumb/9/9c/Mark_Twain_birthplace.jpg/800px-Mark_Twain_birthplace.jpg",credit:"",caption:"Mark Twain's birthplace, Florida, Missouri"}}]},this.options={script_path:"",height:this._el.container.offsetHeight,width:this._el.container.offsetWidth,layout:"landscape",base_class:"",start_at_slide:0,menubar_height:0,skinny_size:650,relative_date:!1,duration:1e3,ease:VCO.Ease.easeInOutQuint,dragging:!0,trackResize:!0,map_type:"stamen:toner-lite",slide_padding_lr:45,slide_default_fade:"0%",menubar_default_y:0,map_popup:!1,zoom_distance:100,line_follows_path:!0,line_color:"#c34528",line_color_inactive:"#CCC",line_join:"miter",line_weight:3,line_opacity:.8,line_dash:"5,5",api_key_flickr:"f2cc870b4d233dd0a5bfe73fd0d64ef0",language:"en"},this.current_slide=this.options.start_at_slide,this.animator_map=null,this.animator_storyslider=null,VCO.Util.mergeData(this.options,i),"landscape"==this.options.layout&&(this.options.map_center_offset={left:-200,top:0}),"zoomify"==this.options.map_type&&this.options.map_as_image&&(this.options.map_size_sticky=2),this.options.map_as_image&&(this.options.calculate_zoom=!1),this.options.relative_date?"undefined"!=typeof moment?n._loadLanguage(e):VCO.Load.js(this.options.script_path+"/library/moment.js",function(){n._loadLanguage(e),trace("LOAD MOMENTJS")}):n._loadLanguage(e),this},_loadLanguage:function(t){var e=this;"en"==this.options.language?(this.options.language=VCO.Language,this._initData(t)):VCO.Load.js(this.options.script_path+"/locale/"+this.options.language+".js",function(){e._initData(t)})},goTo:function(t){t!=this.current_slide&&(this.current_slide=t,this._storyslider.goTo(this.current_slide),this._map.goTo(this.current_slide))},updateDisplay:function(){this.ready&&this._updateDisplay()},_initData:function(t){var e=this;"string"==typeof t?VCO.getJSON(t,function(t){t&&t.storymap&&VCO.Util.mergeData(e.data,t.storymap),e._onDataLoaded()}):"object"==typeof t?(t.storymap?e.data=t.storymap:trace("data must have a storymap property"),e._onDataLoaded()):e._onDataLoaded()},_initLayout:function(){var t=this;this._el.container.className+=" vco-storymap",this.options.base_class=this._el.container.className,this._el.menubar=VCO.Dom.create("div","vco-menubar",this._el.container),this._el.map=VCO.Dom.create("div","vco-map",this._el.container),this._el.storyslider=VCO.Dom.create("div","vco-storyslider",this._el.container),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this._el.map.style.height="1px",this._el.storyslider.style.top="1px",this._el.map.style.backgroundColor=this.options.map_background_color,this._menubar=new VCO.MenuBar(this._el.menubar,this._el.container,this.options),this._storyslider=new VCO.StorySlider(this._el.storyslider,this.data,this.options),this._storyslider.on("loaded",this._onStorySliderLoaded,this),this._storyslider.init(),"portrait"==this.options.layout?(this.options.map_height=this.options.height/this.options.map_size_sticky,this.options.storyslider_height=this.options.height-this._el.menubar.offsetHeight-this.options.map_height-1,this._menubar.setSticky(0)):(this.options.menubar_height=this._el.menubar.offsetHeight,this.options.map_height=this.options.height,this.options.storyslider_height=this.options.height-this._el.menubar.offsetHeight-1,this._menubar.setSticky(this.options.menubar_height)),this._updateDisplay(this.options.map_height,!0,2e3),this._menubar.show(2e3)},_initEvents:function(){this._menubar.on("collapse",this._onMenuBarCollapse,this),this._menubar.on("back_to_start",this._onBackToStart,this),this._menubar.on("overview",this._onOverview,this),this._storyslider.on("change",this._onSlideChange,this),this._storyslider.on("colorchange",this._onColorChange,this)},_updateDisplay:function(t,e,i){var n=this.options.duration,s=this.options.base_class,a=this;i&&(n=i),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this.options.layout=this.options.width<=this.options.skinny_size?"portrait":"landscape",t&&(this.options.timenav_height=t),VCO.Browser.touch&&(this.options.layout=VCO.Browser.orientation(),s+=" vco-mobile"),"portrait"==this.options.layout?(s+=" vco-skinny",this._map.setMapOffset(0,0),this.options.map_height=this.options.height/this.options.map_size_sticky,this.options.storyslider_height=this.options.height-this.options.map_height-1,this._menubar.setSticky(0),s+=" vco-layout-portrait",e?(this.animator_map&&this.animator_map.stop(),this.animator_map=VCO.Animate(this._el.map,{height:this.options.map_height+"px",duration:n,easing:VCO.Ease.easeOutStrong,complete:function(){}}),this.animator_storyslider&&this.animator_storyslider.stop(),this.animator_storyslider=VCO.Animate(this._el.storyslider,{height:this.options.storyslider_height+"px",duration:n,easing:VCO.Ease.easeOutStrong})):(this._el.map.style.height=Math.ceil(this.options.map_height)+"px",this._el.storyslider.style.height=this.options.storyslider_height+"px"),this._menubar.updateDisplay(this.options.width,this.options.height,e),this._storyslider.updateDisplay(this.options.width,this.options.storyslider_height,e,this.options.layout)):(s+=" vco-layout-landscape",this.options.menubar_height=this._el.menubar.offsetHeight,this.options.map_height=this.options.height,this.options.storyslider_height=this.options.height,this._menubar.setSticky(this.options.menubar_height),this._menubar.setSticky(this.options.menubar_height),this._el.map.style.height=this.options.height+"px",this._el.storyslider.style.top=0,this._el.storyslider.style.height=this.options.storyslider_height+"px",this._menubar.updateDisplay(this.options.width,this.options.height,e),this._storyslider.updateDisplay(this.options.width/2,this.options.storyslider_height,e,this.options.layout)),this._el.container.className=s},_onDataLoaded:function(t){trace("dataloaded"),this.fire("dataloaded"),this._initLayout(),this._initEvents(),this.ready=!0},_onColorChange:function(t){this._menubar.setColor(t.color||t.image?!0:!1)},_onSlideChange:function(t){this.current_slide!=t.current_slide&&(this.current_slide=t.current_slide,this.fire("change",{current_slide:this.current_slide},this))},_onMapChange:function(t){this.current_slide!=t.current_marker&&(this.current_slide=t.current_marker,this._storyslider.goTo(this.current_slide),this.fire("change",{current_slide:this.current_slide},this))},_onOverview:function(t){this._map.markerOverview()},_onBackToStart:function(t){this.current_slide=0,this._map.goTo(this.current_slide),this._storyslider.goTo(this.current_slide),this.fire("change",{current_slide:this.current_slide},this)},_onMenuBarCollapse:function(t){this._updateDisplay(t.y,!0)},_onMouseClick:function(t){},_fireMouseEvent:function(t){if(this._loaded){var e=t.type;e="mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,this.hasEventListeners(e)&&("contextmenu"===e&&VCO.DomEvent.preventDefault(t),this.fire(e,{latlng:"something",layerPoint:"something else"}))}},_onMapLoaded:function(){this._loaded.map=!0,this._onLoaded()},_onStorySliderLoaded:function(){this._loaded.storyslider=!0,this._onLoaded()},_onLoaded:function(){this._loaded.storyslider&&this._loaded.map&&this.fire("loaded",this.data)}});